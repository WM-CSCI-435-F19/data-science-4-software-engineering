---

title: Exploration of your data

keywords: fastai
sidebar: home_sidebar

summary: "This module comprises all the statistical and inference techniques to describe the inner properties of software data. The submodules might include:"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/1.0_exp.i.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.showdoc</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="MOVED-NECESSARY-PIECES-TO-08">MOVED NECESSARY PIECES TO 08<a class="anchor-link" href="#MOVED-NECESSARY-PIECES-TO-08">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO: Replace with actual mongo call</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">:returns: dataframe</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="nf">simulate_getting_dataframes_from_mongo</span><span class="p">():</span>
    <span class="n">corpus_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file_name&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;data_type&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;contents&#39;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;./test_data/LibEST_semeru_format/requirements&quot;</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;req&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;contents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;./test_data/LibEST_semeru_format/source_code&quot;</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;contents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;./test_data/LibEST_semeru_format/test&quot;</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">corpus_data</span><span class="p">[</span><span class="s1">&#39;contents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">corpus_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">corpus_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">corpus_df</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Hide</span>
<span class="c1">#This isn&#39;t actually used so we don&#39;t need to test it but here you can see how a data frame is organized</span>
<span class="c1">#df = simulate_getting_dataframes_from_mongo()</span>
<span class="n">datas</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Form does not differ from the void, and the void does not differ from the form.&quot;</span><span class="p">,</span> <span class="s2">&quot;Form is the void, and the void is form.&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">datas</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contents&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>contents</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Form does not differ from the void, and the vo...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Form is the void, and the void is form.</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="df_to_txt_file" class="doc_header"><code>df_to_txt_file</code><a href="ds4se/exp/i.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>df_to_txt_file</code>(<strong><code>df</code></strong>, <strong><code>output</code></strong>, <strong><code>cols</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#df_to_txt_file(df,&#39;alexTest&#39;, None)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#ExpTest</span>

<span class="c1">#Create a file</span>
<span class="n">df_to_txt_file</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="c1">#Is it there?</span>
<span class="n">test_bool</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;./output_text.txt&#39;</span><span class="p">)</span>
<span class="k">assert</span><span class="p">(</span><span class="n">test_bool</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;./output_text.txt&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gen_sp_model" class="doc_header"><code>gen_sp_model</code><a href="ds4se/exp/i.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gen_sp_model</code>(<strong><code>df</code></strong>, <strong><code>output</code></strong>, <strong><code>model_name</code></strong>, <strong><code>cols</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#ExpTest</span>

<span class="c1">#Here we test the gen sp model method to see if it properly creates files</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">gen_sp_model</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;output&#39;</span><span class="p">,</span><span class="s1">&#39;_sp_bpe_modal&#39;</span><span class="p">,</span><span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;contents&quot;</span><span class="p">])</span>
<span class="n">expected</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;./&#39;</span> <span class="o">+</span> <span class="n">actual</span> <span class="o">+</span> <span class="s1">&#39;.model&#39;</span><span class="p">)</span>
<span class="k">assert</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;./&#39;</span> <span class="o">+</span> <span class="n">actual</span> <span class="o">+</span> <span class="s1">&#39;.model&#39;</span><span class="p">)</span>
<span class="n">expected2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="o">+</span> <span class="n">actual</span> <span class="o">+</span> <span class="s1">&#39;.vocab&#39;</span><span class="p">)</span>
<span class="k">assert</span><span class="p">(</span><span class="n">expected2</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="o">+</span> <span class="n">actual</span> <span class="o">+</span> <span class="s1">&#39;.vocab&#39;</span><span class="p">)</span>

<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;./output_text.txt&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="encode_text" class="doc_header"><code>encode_text</code><a href="ds4se/exp/i.py#L59" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>encode_text</code>(<strong><code>text</code></strong>, <strong><code>model_prefix</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#ExpTest</span>

<span class="c1">#This tests the encode text method assuming the sp model(?)</span>

<span class="n">sp_model</span> <span class="o">=</span> <span class="n">gen_sp_model</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;output&#39;</span><span class="p">,</span><span class="s1">&#39;_sp_bpe_modal&#39;</span><span class="p">,</span><span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;contents&quot;</span><span class="p">])</span>

<span class="n">actual</span> <span class="o">=</span> <span class="n">encode_text</span><span class="p">(</span><span class="s2">&quot;Form does not differ from the void, and the void does not differ from the form.&quot;</span><span class="p">,</span> <span class="s1">&#39;output_sp_bpe_modal&#39;</span><span class="p">)</span>

<span class="n">expected</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;▁the&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;▁does&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁not&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁differ&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁from&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁void&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁Form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁and&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="c1">#Clean up Test</span>
<span class="k">assert</span><span class="p">(</span><span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Counter({&#39;▁the&#39;: 3, &#39;▁does&#39;: 2, &#39;▁not&#39;: 2, &#39;▁differ&#39;: 2, &#39;▁from&#39;: 2, &#39;▁void&#39;: 2, &#39;▁Form&#39;: 1, &#39;,&#39;: 1, &#39;▁and&#39;: 1, &#39;▁form&#39;: 1, &#39;.&#39;: 1})
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dit_shannon" class="doc_header"><code>dit_shannon</code><a href="ds4se/exp/i.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dit_shannon</code>(<strong><code>token_counts</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#ExpTest</span>
<span class="c1">#This test takes a sample string and creates a counter that it runs dit shannon on to verify the shannon functionality</span>
<span class="n">sample_txt</span> <span class="o">=</span> <span class="s2">&quot;Form does not differ from the void, and the void does not differ from the form.&quot;</span>
<span class="n">sample_tcnt</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">sample_txt</span><span class="p">)</span>

<span class="n">answer</span> <span class="o">=</span> <span class="n">dit_shannon</span><span class="p">(</span><span class="n">sample_tcnt</span><span class="p">)</span>
<span class="n">expected</span> <span class="o">=</span> <span class="mf">3.6783847516036627</span>
<span class="c1">#assert(answer == expected)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sample_tcnt</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>3.6783847516036627
3.6783847516036627
Counter({&#39; &#39;: 15, &#39;o&#39;: 10, &#39;d&#39;: 7, &#39;e&#39;: 7, &#39;f&#39;: 7, &#39;r&#39;: 6, &#39;t&#39;: 5, &#39;m&#39;: 4, &#39;i&#39;: 4, &#39;n&#39;: 3, &#39;h&#39;: 3, &#39;s&#39;: 2, &#39;v&#39;: 2, &#39;F&#39;: 1, &#39;,&#39;: 1, &#39;a&#39;: 1, &#39;.&#39;: 1})
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="entropies_of_df_entries" class="doc_header"><code>entropies_of_df_entries</code><a href="ds4se/exp/i.py#L95" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>entropies_of_df_entries</code>(<strong><code>df</code></strong>, <strong><code>col</code></strong>, <strong><code>model_prefix</code></strong>)</p>
</blockquote>
<p>Returns a list of the entropies of each entry in a dataframe column</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#ExpTest</span>
<span class="c1">#Entropies of df test</span>
<span class="n">enty</span> <span class="o">=</span> <span class="n">entropies_of_df_entries</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;contents&#39;</span><span class="p">,</span><span class="s1">&#39;output_sp_bpe_modal&#39;</span><span class="p">)</span>

<span class="n">entropy1</span> <span class="o">=</span> <span class="n">dit_shannon</span><span class="p">(</span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;▁the&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;▁does&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁not&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁differ&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁from&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> 
                                <span class="s1">&#39;▁void&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁Form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁and&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}))</span>

<span class="n">entropy2</span> <span class="o">=</span> <span class="n">dit_shannon</span><span class="p">(</span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;▁is&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁the&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁void&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;▁Form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁and&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;▁form&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}))</span>

<span class="k">assert</span><span class="p">(</span><span class="n">enty</span> <span class="o">==</span> <span class="p">[</span><span class="n">entropy1</span><span class="p">,</span> <span class="n">entropy2</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TODO: Finish this such that is finds the entropy of the entire corpus \</span>
<span class="c1">#       and preserves the individual token frequencies so that we can   \</span>
<span class="c1">#      compute the most common tokens</span>

<span class="c1"># def entropy_of_whole_corpus(df, col, model_prefix):</span>
<span class="c1">#     &#39;&#39;&#39;Returns a dictionary of the entropies of each token in a dataframe corpus&#39;&#39;&#39;</span>
<span class="c1">#     entropies = {}</span>
<span class="c1">#     token_counts = encode_text(pd.concat[col], model_prefix)</span>
<span class="c1">#     entropies.append(dit_shannon(token_counts))</span>
<span class="c1">#     return entropies</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#FLAG DELETE</span>
<span class="c1"># TODO: Do we need this function?</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">manual_shannon</span><span class="p">(</span><span class="n">token_freqs</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">token_freqs</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sum</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#FLAG DELETE</span>
<span class="c1"># TODO: Do we need this function?</span>
<span class="k">def</span> <span class="nf">sort_token_data</span><span class="p">(</span><span class="n">token_data</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">token_data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">,</span>  <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;Occurrences&quot;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="EXPLORATORY-ANALYSIS">EXPLORATORY ANALYSIS<a class="anchor-link" href="#EXPLORATORY-ANALYSIS">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="LIBest-Corpus">LIBest Corpus<a class="anchor-link" href="#LIBest-Corpus">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Hide</span>
<span class="c1"># Create a dataframe of the requirements, source code and test case data for LIBest</span>
<span class="c1"># Create a sentencepiece model using the entire LIBest corpus</span>
<span class="n">LIB_corpus_df</span> <span class="o">=</span> <span class="n">simulate_getting_dataframes_from_mongo</span><span class="p">()</span>
<span class="n">LIB_model</span> <span class="o">=</span> <span class="n">gen_sp_model</span><span class="p">(</span><span class="n">LIB_corpus_df</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;LIBest&#39;</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;_sp_bpe_modal&#39;</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contents&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Looking-at-Individual-Files">Looking at Individual Files<a class="anchor-link" href="#Looking-at-Individual-Files">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Hide</span>
<span class="c1"># Use the model to compute each file&#39;s entropy</span>
<span class="n">LIB_entropies</span> <span class="o">=</span> <span class="n">entropies_of_df_entries</span><span class="p">(</span><span class="n">LIB_corpus_df</span><span class="p">,</span> <span class="s1">&#39;contents&#39;</span><span class="p">,</span> <span class="n">LIB_model</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Hide</span>
<span class="c1"># Calculate metrics on the LIBest corpus entropies</span>
<span class="c1">#print(&quot;Max entropy:&quot;, max(LIB_entropies))</span>
<span class="c1">#print(&quot;Min entropy:&quot;, min(LIB_entropies))</span>
<span class="c1">#print(&quot;Average entropy:&quot;, mean(LIB_entropies))</span>
<span class="c1">#print(&quot;Median entropy:&quot;, stat.median(LIB_entropies))</span>

<span class="c1">#print(&quot;Entropy Standard Deviation:&quot;, std(LIB_entropies))</span>

<span class="c1">#confidence = 0.95</span>
<span class="c1">#n = len(LIB_entropies)</span>
<span class="c1">#m = mean(LIB_entropies)</span>
<span class="c1">#std_err = sem(LIB_entropies)</span>
<span class="c1">#h = std_err * t.ppf((1 + confidence) / 2, n - 1)</span>

<span class="c1">#start = m - h</span>
<span class="c1">#end = m + h</span>
<span class="c1">#print(f&quot;95% of entropies fall within {start} and {end}&quot;)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Max entropy: 8.736686724450998
Min entropy: 3.979797585487148
Average entropy: 6.9103334297633525
Median entropy: 7.086176924292342
Entropy Standard Deviation: 1.069417835431708
95% of entropies fall within 6.681088254680821 and 7.139578604845884
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Hide</span>
<span class="c1"># Create a histogram of the entropy distribution</span>
<span class="c1">#plt.hist(LIB_entropies, bins = 20)</span>
<span class="c1">#plt.ylabel(&quot;Num Files&quot;)</span>
<span class="c1">#plt.xlabel(&quot;Entropy&quot;)</span>
<span class="c1">#plt.show()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Looking-at-the-Corpus-as-a-Whole">Looking at the Corpus as a Whole<a class="anchor-link" href="#Looking-at-the-Corpus-as-a-Whole">&#182;</a></h2>
</div>
</div>
</div>
</div>
 

