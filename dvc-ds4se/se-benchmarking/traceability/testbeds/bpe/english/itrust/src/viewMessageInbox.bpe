▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . ViewMyMessages Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . MessageBean "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁Message "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁ViewMyMessages Action ▁action ▁= ▁new ▁ViewMyMessages Action ( prodDAO , ▁loggedInMID . longValue ()); ▁MessageBean ▁original ▁= ▁null ; ▁if ▁( request . getParameter (" msg ") ▁ != ▁null ) ▁{ ▁String ▁ msgParameter ▁= ▁request . getParameter (" msg "); ▁int ▁ msgIndex ▁= ▁0; ▁try ▁{ ▁ msgIndex ▁= ▁Integer . parse Int ( msgParameter ); ▁} ▁catch ▁( NumberFormat Exception ▁ nfe ) ▁{ ▁response . send Redirect (" message Inbox . jsp "); ▁} ▁List < MessageBean > ▁messages ▁= ▁null ; ▁if ▁( session . get Attribute (" messages ") ▁ != ▁null ) ▁{ ▁messages ▁= ▁( List < MessageBean > ) ▁session . get Attribute (" messages "); ▁if ( msgIndex ▁> ▁messages . size () ▁|| ▁ msgIndex ▁< ▁0) ▁{ ▁ msgIndex ▁= ▁0; ▁response . send Redirect (" oop s . jsp "); ▁} ▁} ▁else ▁{ ▁response . send Redirect (" message Inbox . jsp "); ▁} ▁original ▁= ▁( MessageBean ) messages . get ( msgIndex ); ▁action . set Read ( original ); ▁session . set Attribute (" message ", ▁original ); ▁} ▁else ▁{ ▁response . send Redirect (" message Inbox . jsp "); ▁} ▁%> ▁< div > ▁< table ▁width ="100 %" ▁ style =" back g round - color : ▁# D DDDDD ;"> ▁< tr > ▁< td >< b > From :</ b > ▁<%= ▁action . getName ( original . get From ()) ▁%></ td > ▁</ tr > ▁< tr > ▁< td >< b > Subject :</ b > ▁<%= ▁original . get Subject () ▁%></ td > ▁</ tr > ▁< tr > ▁< td >< b > Date ▁& amp ; ▁ Time :</ b > ▁<%= ▁original . getSen tDate () ▁%></ td > ▁</ tr > ▁</ table > ▁</ div > ▁< table > ▁< tr > ▁< td ▁col span ="2">< a ▁href =" reply . jsp " ▁ style =" font - size : ▁ 18 px ;"> Reply </ a ></ td > ▁</ tr > ▁< tr > ▁< td ▁col span ="2">< b > Message :</ b ></ td > ▁</ tr > ▁< tr > ▁< td ▁col span ="2" ><%= ▁original . getBody () ▁%></ td > ▁</ tr > ▁</ table > ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>