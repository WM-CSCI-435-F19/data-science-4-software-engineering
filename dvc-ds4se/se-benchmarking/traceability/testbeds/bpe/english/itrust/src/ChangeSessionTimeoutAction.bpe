▁p ackage ▁edu . nc su . cs c . itrust . action ; ▁import ▁edu . nc su . cs c . itrust . dao . DAOFactory ; ▁import ▁edu . nc su . cs c . itrust . dao . mysql . AccessDAO ; ▁import ▁edu . nc su . cs c . itrust . exception . DBException ; ▁import ▁edu . nc su . cs c . itrust . exception . FormValidat ionException ; ▁/** ▁* ▁Used ▁to ▁change ▁the ▁session ▁timeout , ▁session Timeout . jsp . ▁Note ▁that ▁a ▁change ▁to ▁this ▁timeout ▁only ▁gets ▁* ▁reflect ed ▁on ▁new ▁session s . ▁* ▁* ▁@ author ▁Andy ▁Men e ely ▁* ▁*/ ▁public ▁class ▁Change SessionTimeout Action ▁{ ▁private ▁AccessDAO ▁accessDAO ; ▁/** ▁* ▁Set s ▁up ▁ def ual t s . ▁* ▁* ▁@ param ▁factory ▁* ▁@ author ▁Andy ▁Men e ely ▁*/ ▁public ▁Change SessionTimeout Action ( DAOFactory ▁factory ) ▁{ ▁this . access DAO ▁= ▁factory . get AccessDAO (); ▁} ▁/** ▁* ▁Changes ▁the ▁session ▁timeout , ▁the ▁compl i cate d ▁logic ▁of ▁this ▁is ▁some what ▁reg ret ta b ly ▁in ▁the ▁DAO , ▁* ▁ {@ link ▁AccessDAO } ▁* ▁* ▁@ param ▁ minuteString ▁* ▁Pass ▁the ▁number ▁of ▁minutes ▁in ▁the ▁form ▁of ▁a ▁string , ▁greate r ▁than ▁0 . ▁* ▁@ throw s ▁ FormValidat ionException ▁* ▁@ throw s ▁DBException ▁* ▁@ author ▁Andy ▁Men e ely ▁*/ ▁public ▁void ▁change SessionTimeout ( String ▁ minuteString ) ▁throw s ▁ FormValidat ionException , ▁DBException ▁{ ▁try ▁{ ▁Integer ▁minutes ▁= ▁Integer . value Of ( minuteString ); ▁if ▁( minutes ▁< ▁1) ▁throw ▁new ▁ FormValidat ionException (" M ust ▁be ▁a ▁number ▁greate r ▁than ▁0 "); ▁accessDAO . set SessionTimeout Min s ( minutes ); ▁} ▁catch ▁( NumberFormat Exception ▁e ) ▁{ ▁throw ▁new ▁ FormValidat ionException (" Th at ▁is ▁not ▁a ▁number "); ▁} ▁} ▁/** ▁* ▁Returns ▁the ▁current ▁session ▁timeout ▁in ▁minutes , ▁as ▁reflect ed ▁in ▁the ▁database ▁* ▁* ▁@ return ▁the ▁number ▁of ▁minutes ▁it ▁woul d ▁take ▁for ▁an ▁in act ive ▁session ▁to ▁timeout ▁* ▁@ throw s ▁DBException ▁* ▁@ author ▁Andy ▁Men e ely ▁*/ ▁public ▁int ▁get SessionTimeout () ▁throw s ▁DBException ▁{ ▁return ▁accessDAO . get SessionTimeout Min s (); ▁} ▁}