▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Edit Prescription Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . EditOfficeVisit Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . OfficeVisitBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PrescriptionBean "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Edit ▁Prescription ▁Information "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁boolean ▁ makeChange ▁= ▁false ; ▁if ▁( request . getParameter (" change ") ▁ != ▁null ) ▁{ ▁if ▁( request . getParameter (" change "). equals I gnore Case (" True ")) ▁{ ▁ makeChange ▁= ▁true ; ▁} ▁} ▁Edit Prescription Action ▁prescription Action ▁= ▁new ▁Edit Prescription Action ( prodDAO ); ▁String ▁ovIDString ▁= ▁request . getParameter (" ovID "); ▁String ▁pidString ▁= ▁( String ) session . get Attribute (" pid "); ▁int ▁ presID ▁= ▁Integer . parse Int ( request . getParameter (" presID ")); ▁EditOfficeVisit Action ▁office Action ▁= ▁new ▁EditOfficeVisit Action ( prodDAO , ▁loggedInMID , ▁pidString , ▁ovIDString ); ▁OfficeVisitBean ▁ov ▁= ▁office Action . getOfficeVisit (); ▁ PrescriptionBean ▁prescription ▁= ▁null ; ▁for ▁( PrescriptionBean ▁pres ▁: ▁ov . getPrescriptions ()) ▁{ ▁if ▁( pres . get Id () ▁== ▁ presID ) ▁{ ▁prescription ▁= ▁pres ; ▁break ; ▁} ▁} ▁if ▁( prescription ▁== ▁null ) ▁{%> ▁< h 1> ERROR : ▁prescription ▁not ▁found . </ h 1> ▁<%} else { %> ▁<% if ▁(! makeChange ) ▁{ ▁%> ▁<% / / ▁This ▁portion ▁print s ▁a ▁form ▁to ▁edit ▁the ▁prescription ▁information . ▁%> ▁< form ▁action =" editPrescription . jsp ? ovID =<%= ovID String %>& presID =<%= presID %>& change = True " ▁method = post > ▁< table ▁align = center ▁border =1 ▁class =" f Table "> ▁< tr > ▁< th ▁col span =5> Edit ▁Prescription ▁ Instructions </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< td ▁align = center > Medication </ td > ▁< td ▁align = center > Dosage </ td > ▁< td ▁align = center > Date s </ td > ▁< td ▁align = center ▁col span =2> Instructions </ td > ▁</ tr > ▁< tr > ▁< td ▁align = center ><%= prescription . get Medication (). get Description () ▁%> ▁(<%= prescription . get Medication (). getNDCode () ▁ %>)</ td > ▁< td ▁align = center >< input ▁type =" text " ▁name =" dosage " ▁value ="<%= prescription . get Dosage () ▁%>" ▁size ="5"> ( In ▁mg ) </ td > ▁< td ▁align = center ><%= prescription . getStartDate Str () ▁%> ▁to ▁<%= prescription . getEndDate Str () ▁%></ td > ▁< td ▁align = center >< textarea ▁name =" instructions " ▁rows ="2" ▁cols ="20" ><%= prescription . get Instructions () ▁%></ textarea ></ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< center > ▁< input ▁type =" submit " ▁value =" Change "> ▁< input ▁type =" re set " ▁value =" Reset "> ▁</ center > ▁</ form > ▁<%} ▁else ▁{%> ▁<% / / ▁This ▁portion ▁print s ▁out ▁the ▁recent ly ▁edited ▁prescription ▁information ▁and ▁provide s ▁a ▁link ▁to ▁the ▁ home ▁page . ▁try ▁{ ▁prescription . set Dosage ( Integer . parse Int ( request . getParameter (" dosage ")) ); ▁prescription . set Instructions ( request . getParameter (" instructions ")); ▁prescription Action . editPrescription ( prescription ); ▁%> ▁< table ▁align = center ▁border =1 ▁class =" f Table "> ▁< tr > ▁< th ▁col span =5> Prescription ▁Updated !</ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< td ▁align = center > Medication </ td > ▁< td ▁align = center > Dosage </ td > ▁< td ▁align = center > Date s </ td > ▁< td ▁align = center ▁col span =2> Instructions </ td > ▁</ tr > ▁< tr > ▁< td ▁align = center ><%= prescription . get Medication (). get Description () ▁%> ▁(<%= prescription . get Medication (). getNDCode () ▁ %>)</ td > ▁< td ▁align = center ><%= prescription . get Dosage () ▁%> mg </ td > ▁< td ▁align = center ><%= prescription . getStartDate Str () ▁%> ▁to ▁<%= prescription . getEndDate Str () ▁%></ td > ▁< td ▁align = center ><%= prescription . get Instructions () ▁%></ td > ▁</ tr > ▁</ table > ▁<% ▁} ▁catch ( Exception ▁e ) ▁{ ▁%>< center >< b > The ▁Prescription ▁could ▁not ▁be ▁edited ▁du e ▁to ▁an ▁ internal ▁error . < br ▁/> P lease ▁T ry ▁again ▁later . < br ▁/> <%= e . to String () ▁%></ b ></ center > ▁<% ▁} ▁%> ▁ <%}%> ▁ <%}%> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>