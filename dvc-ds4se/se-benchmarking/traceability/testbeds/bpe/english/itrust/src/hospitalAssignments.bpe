▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . HtmlEncoder " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . HospitalBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Manage Hospital Assignments Action "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . net . URLEncoder " ▁%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Hospital ▁S ta ff ing ▁ Assignments "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁String ▁pidString ▁= ▁( String ) session . get Attribute (" mid "); ▁/* ▁Require ▁a ▁Personnel ▁ID ▁first ▁*/ ▁if ▁( null ▁== ▁pidString ▁|| ▁"" . equals ( pidString )){ ▁response . send Redirect (" . . / getPersonnelID . jsp ? forward = admin / hospital Assignments . jsp "); ▁return ; ▁} ▁else ▁{ ▁// session . remove Attribute (" mid "); ▁} ▁/* ▁B ad ▁patient ▁ID ▁gets ▁you ▁b o o t ed ▁to ▁error ▁page ▁*/ ▁Manage Hospital Assignments Action ▁ hosAssignManager ▁= ▁new ▁Manage Hospital Assignments Action ( prodDAO , loggedInMID . longValue ()); ▁long ▁pid ▁= ▁ hosAssignManager . check HCPID ( pidString ); ▁/* ▁ Now ▁take ▁care ▁of ▁updating ▁information ▁*/ ▁String ▁action ▁= ▁""; ▁if ▁( null ▁ != ▁request . getParameter (" action ")) ▁{ ▁action ▁= ▁request . getParameter (" action "); ▁} ▁if ▁( action . equals (" ass g n ")) ▁{ ▁ hosAssignManager . assign HCP To Hospital ( pid ▁+ ▁"", ▁request . getParameter (" id ")); ▁%>< span ▁> HCP ▁has ▁been ▁assigned . ▁<%= request . getParameter (" id ") ▁%>< br ▁/></ span ><% ▁} ▁else ▁if ▁( action . equals (" un ass ")) ▁{ ▁ hosAssignManager . removeHCP Assignment To Hospital ( pid ▁+ ▁"", ▁request . getParameter (" id ")); ▁%>< span ▁> HCP ▁has ▁been ▁unassigned . ▁<%= request . getParameter (" id ") ▁%>< br ▁/></ span ><% ▁} ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< table > ▁< tr > ▁< td ▁v align = top > ▁< table ▁class =" f Table "> ▁< tr > ▁< th ▁col span =3> Assigned ▁Hospitals </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > Hospital ▁ID </ th > ▁< th > Hospital ▁Name </ th > ▁< th > Assignment </ th > ▁</ tr > ▁<% ▁List < HospitalBean > ▁assigned List ▁= ▁ hosAssignManager . get Assigned Hospitals ( pidString ); ▁String ▁ tempID ▁= ▁""; ▁String ▁ tempName ▁= ▁""; ▁String ▁escaped Name ▁= ▁""; ▁for ▁( HospitalBean ▁assigned ▁: ▁assigned List ) ▁{ ▁ tempID ▁= ▁assigned . get HospitalID (); ▁ tempName ▁= ▁assigned . get HospitalName (); ▁escaped Name ▁= ▁ URLEncoder . encode ( tempName , ▁" UTF -8") . replace All (" \\ +", ▁" %20 "); ▁%>< tr > ▁< td ><%= tempID ▁%></ td > ▁< td ><%= HtmlEncoder . encode ( tempName ) ▁%></ td > ▁< td >< a ▁href =" hospital Assignments . jsp ? pid =<%= pidString ▁%>& id =<%= tempID ▁%>& action = un ass " ▁> Un assign </ a ></ td > ▁</ tr > ▁<%} ▁%> ▁</ table > ▁</ td > ▁< td ▁v align = top > ▁< table ▁class =" f Table "> ▁< tr > ▁< th ▁col span =3> Available ▁Hospitals </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > Hospital ▁ID </ th > ▁< th > Hospital ▁Name </ th > ▁< th > Assignment </ th > ▁</ tr > ▁<% ▁List < HospitalBean > ▁available List ▁= ▁ hosAssignManager . get Available Hospitals ( pidString ); ▁ tempID ▁= ▁""; ▁ tempName ▁= ▁""; ▁escaped Name ▁= ▁""; ▁for ▁( HospitalBean ▁assigned ▁: ▁available List ) ▁{ ▁ tempID ▁= ▁assigned . get HospitalID (); ▁ tempName ▁= ▁assigned . get HospitalName (); ▁escaped Name ▁= ▁ URLEncoder . encode ( tempName , ▁" UTF -8") . replace All (" \\ +", ▁" %20 "); ▁%>< tr > ▁< td ><%= tempID ▁%></ td > ▁< td ><%= HtmlEncoder . encode ( tempName ) ▁%></ td > ▁< td >< a ▁href =" hospital Assignments . jsp ? pid =<%= pidString %>& id =<%= tempID %>& action = ass g n "> A s sign </ a ></ td > ▁</ tr > ▁<%} ▁%> ▁</ table > ▁</ td ></ tr > ▁</ table > ▁</ div > ▁< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>