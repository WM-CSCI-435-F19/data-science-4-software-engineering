▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . HCPDiagnosisBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . MedicationBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . LabProcedureBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . M yDiagnosisAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . DiagnosisBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . LOINCDAO "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PersonnelBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PrescriptionBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PersonnelDAO "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . util . ArrayList "%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁My ▁Diagnoses "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁<% ▁session . remove Attribute (" personnelList "); ▁String ▁icdcode ▁= ▁request . getParameter (" icd "); ▁LOINCDAO ▁loinc DAO ▁= ▁DAOFactory . getPr oductionInstance (). get LOINCDAO (); ▁M yDiagnosisAction ▁action ▁= ▁new ▁M yDiagnosisAction ( prodDAO , ▁loggedInMID . longValue ()); ▁List < DiagnosisBean > ▁diagnoses ▁= ▁action . getDiagnose s (); ▁%> ▁< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< div ▁align =" center "> ▁< h 2> Diagnoses </ h 2> ▁< table ▁class =" f Table "> ▁< tr > ▁< th > Diagnosis </ th > ▁</ tr > ▁<% for ( DiagnosisBean ▁d ▁: ▁diagnoses ) ▁{ ▁%> ▁< tr > ▁< td >< a ▁href =" my Diagnoses . jsp ? icd =<%= d . getICDCode ()%>"><%= d . get Formatted Description ()%></ a ></ td > ▁</ tr > ▁<%} ▁%> ▁</ table > ▁</ div > ▁< br ▁/> ▁<% ▁if ▁( icdcode ▁ != ▁null ▁&& ▁! icdcode . equals ("")) ▁{ ▁List < HCPDiagnosisBean > ▁hcps ▁= ▁action . getHCP By Diagnosis ( icdcode ); ▁%> ▁< div ▁align =" center "> ▁< h 2> HCP s ▁ having ▁expe r ience ▁with ▁diagnosis ▁<%= icdcode ▁%></ h 2> ▁< table ▁class =" f Table "> ▁< tr > ▁< th > HCP </ th > ▁< th > Number ▁of ▁Patients </ th > ▁< th > List ▁of ▁ Prescriptions </ th > ▁< th > List ▁of ▁Lab ▁Procedures </ th > ▁< th > A verage ▁Office ▁Visit ▁ Satisfaction </ th > ▁< th > A verage ▁ Treatment ▁ Satisfaction </ th > ▁</ tr > ▁<% ▁if ( hcp s . size () ▁> ▁0) ▁{ ▁List < PersonnelBean > ▁personnelList ▁= ▁new ▁ArrayList < PersonnelBean > (); ▁int ▁index ▁= ▁0; ▁for ▁( HCPDiagnosisBean ▁bean : ▁hcps ) ▁{ ▁%> ▁< tr > ▁< td >< a ▁href ="/ iTrust / auth / view Personnel . jsp ? personnel =<%= index %>"><%= bean . get HCPName ()%></ a ></ td > ▁< td ><%= bean . getNumPatient s ()%></ td > ▁< td ><% if ▁( bean . get Med List (). is Empty ()) ▁{ ▁out . print (" ( no ▁prescriptions )"); ▁} ▁else ▁{ ▁for ▁( PrescriptionBean ▁p : ▁action . getPrescriptions By HCP And ICD ( bean . getHCP (), ▁icdcode )) ▁{%> ▁< a ▁href =" viewPrescription Information . jsp ? visitID =<%= p . get VisitID ()%>& presID =<%= p . get Id ()%>"> ▁<%= p . get Medication (). getNDCode () ▁+ ▁" ▁" ▁+ ▁p . get Medication (). get Description () ▁+ ▁" ▁prescribed "%> ▁</ a >< br / > ▁<%} } ▁%></ td > ▁< td ><% if ▁( bean . getLab List (). is Empty ()) ▁{ ▁out . print (" ( no ▁lab ▁procedures ▁ordered )"); ▁} ▁else ▁{ ▁for ▁( LabProcedureBean ▁p : ▁bean . getLab List ()) ▁{%> <%= p . getLo inc () ▁+ ▁" ▁" ▁+ ▁loinc DAO . get Procedures ( p . getLo inc ()). get (0) . get Component () ▁+ ▁" ▁procedure ▁ordered "%> < br / ><% } } ▁%></ td > ▁< td ><%= bean . getVisit Satisfaction () ▁%></ td > ▁< td ><%= bean . get Treatment Satisfaction () ▁%></ td > ▁</ tr > ▁<% ▁PersonnelBean ▁personnel ▁= ▁new ▁PersonnelDAO ( prodDAO ) . getPersonnel ( bean . getHCP ()); ▁personnelList . add ( personnel ); ▁index ++; ▁} ▁session . set Attribute (" personnelList ", ▁personnelList ); ▁} ▁else ▁{ ▁%> ▁< tr > ▁< td ▁col span ="6" ▁align =" center "> ▁No ▁Data ▁</ td > ▁</ tr > ▁<% ▁} ▁%> ▁</ table > ▁</ div > ▁<% ▁} ▁%> ▁<%@ include ▁file ="/ f ooter . jsp "%>