▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . LabProcUAPAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . LabProcedureBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Update ▁Lab ▁Procedure "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁String ▁headerMessage ▁= ▁""; ▁ LabProcedureBean ▁lbean ▁= ▁null ; ▁long ▁requestID ▁= ▁0 L ; ▁String ▁ lpid ▁= ▁request . getParameter (" ID "); ▁if ▁( lpid ▁ != ▁null ▁&& ▁! lpid . equals ("")) ▁{ ▁try ▁{ ▁requestID ▁= ▁Long . parse Long ( lpid ); ▁lbean ▁= ▁prodDAO . get LabProcedureDAO (). getLabProcedure ( requestID ); ▁} ▁catch ▁( Exception ▁e ) ▁{ ▁e . print Stack T race (); ▁} ▁} ▁ LabProcUAPAction ▁action 2 ▁= ▁new ▁ LabProcUAPAction ( prodDAO , ▁loggedInMID . longValue ()); ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") ▁ != ▁null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁if ▁( formIsFilled ) ▁{ ▁// This ▁page ▁is ▁not ▁ actually ▁a ▁" page ", ▁it ▁just ▁add s ▁a ▁user ▁and ▁forward s . ▁lbean . set Status ( request . getParameter (" Status ")); ▁lbean . set Results ( request . getParameter (" Results ")); ▁lbean . set Commentary ( request . getParameter (" Commentary ")); ▁try { ▁action 2 . update Procedure ( lbean ); ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Information ▁Updated ▁Successfully </ span > ▁</ div > ▁< br ▁/> ▁<% ▁} ▁catch ( FormValidat ionException ▁e ){ ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage () ▁%></ span > ▁</ div > ▁< br ▁/> ▁<% ▁} ▁} ▁%> ▁<% ▁if ▁( request . getParameter (" message ") ▁ != ▁null ) ▁{ ▁%>< span ▁class =" iTrustMessage " ▁ style =" font - size : ▁16 px ;"><%= request . getParameter (" message ") ▁%></ span ><% ▁} ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< table ▁class =" f Table "> ▁< tr > ▁< th ▁col span ="11"> Laboratory ▁Procedures </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > PatientMID </ th > ▁< th > Lab ▁Code </ th > ▁< th > Rights </ th > ▁< th > Status </ th > ▁< th > Commentary </ th > ▁< th > Results </ th > ▁< th > OfficeVisitID </ th > ▁< th > Updated ▁Date </ th > ▁</ tr > ▁<% LabProcedureBean ▁bean ▁= ▁prodDAO . get LabProcedureDAO (). getLabProcedure ( requestID );%> ▁< tr > ▁< td ▁><%= bean . get Pid ()%></ td > ▁< td ▁><%= bean . getLo inc ()%></ td > ▁< td ▁><%= bean . get Rights ()%></ td > ▁< td ▁><%= bean . get Status ()%></ td > ▁< td ▁><%= bean . get Commentary ()%></ td > ▁< td ▁><%= bean . get Results ()%></ td > ▁< td ▁><%= bean . getOv ID ()%></ td > ▁< td ▁><%= bean . get Timestamp ()%></ td > ▁</ tr > ▁</ table > ▁< form ▁action =" update LabProc . jsp ? ID =<%= lpid %>" & message =" Updated ▁Laboratory ▁Procedure " ▁method =" post ">< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< br ▁/> ▁< br ▁/> ▁<%= headerMessage ▁%> ▁< br ▁/> ▁< table ▁class =" f Table "> ▁< tr > ▁< th ▁col span =2> Update ▁Information </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Status :</ td > ▁< td > ▁< select ▁name =" Status "> ▁< option ▁value =" NOT ▁ YET ▁RECEIVED "><%= lbean . Not _ Received ▁%></ option > ▁< option ▁value =" PENDING "><%= lbean . Pending ▁%></ option > ▁< option ▁value =" COMPLETED "><%= lbean . Completed ▁%></ option > ▁</ select > ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Commentary :</ td > ▁< td >< textarea ▁name =" Commentary "></ textarea > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Results :</ td > ▁< td >< textarea ▁name =" Results "></ textarea ></ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< input ▁type =" submit " ▁ style =" font - size : ▁14 pt ; ▁ font - weight : ▁bold ; " ▁value =" Update "> ▁</ div > ▁</ form > ▁< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>