▁p ackage ▁edu . nc su . cs c . itrust . dao ; ▁import ▁java . sql . Connection ; ▁import ▁java . sql . SQLException ; ▁import ▁java x . n am ing . Context ; ▁import ▁java x . n am ing . Init ial Context ; ▁import ▁java x . n am ing . N am ing Exception ; ▁import ▁java x . sql . Data Source ; ▁/** ▁* ▁ Pro d u c es ▁the ▁JDBC ▁connection ▁from ▁Tomcat ' s ▁JDBC ▁connection ▁p o ol ▁( defined ▁in ▁context . xml ) . ▁ Pro d u c es ▁and ▁* ▁exception ▁when ▁running ▁the ▁ unit ▁tests ▁because ▁they ' re ▁not ▁being ▁run ▁through ▁Tomcat . ▁* ▁* ▁@ author ▁Andy ▁* ▁*/ ▁public ▁class ▁ Pro d u c tion ConnectionDriver ▁implement s ▁I ConnectionDriver ▁{ ▁public ▁ Connection ▁get Connection () ▁throw s ▁SQLException ▁{ ▁try ▁{ ▁return ▁( ( Data Source ) ▁( ( ( Context ) ▁new ▁Init ial Context (). l o ok up (" java : comp / e nv "))) ▁ . l o ok up (" j d b c / itrust ")) . get Connection (); ▁} ▁catch ▁( N am ing Exception ▁e ) ▁{ ▁throw ▁new ▁SQLException ( (" Context ▁Look up ▁N am ing ▁Exception : ▁" ▁+ ▁e . getMessage ()) ); ▁} ▁} ▁}