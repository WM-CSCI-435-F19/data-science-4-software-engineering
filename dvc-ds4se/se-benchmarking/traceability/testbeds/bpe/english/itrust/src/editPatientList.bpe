▁<%@ tag lib ▁uri ="/ W EB - INF / tags . tld " ▁prefix =" itrust "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Edit MonitoringList Action "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Edit ▁Patient ▁List "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁/* ▁Require ▁a ▁Patient ▁ID ▁first ▁*/ ▁String ▁pidString ▁= ▁( String ) session . get Attribute (" pid "); ▁String ▁ addOrRemove ▁= ▁" Add "; ▁if ▁( pidString ▁== ▁null ▁|| ▁1 ▁> ▁pidString . length () ▁|| ▁" false " . equals ( request . getParameter (" confirm Action "))) ▁{ ▁session . remove Attribute (" pid "); ▁response . send Redirect ("/ iTrust / auth / getPatientID . jsp ? forward = hcp - uap / editPatient List . jsp "); ▁return ; ▁} ▁// else ▁{ ▁// ▁session . remove Attribute (" pid "); ▁// } ▁Edit MonitoringList Action ▁action ▁= ▁new ▁Edit MonitoringList Action ( prodDAO , loggedInMID . longValue ()); ▁long ▁pid ▁= ▁Long . parse Long ( pidString ); ▁String ▁patientName ▁= ▁action . get PatientName ( pid ); ▁if ▁( action . is Patient In List ( pid )) ▁{ ▁ addOrRemove ▁= ▁" Remove "; ▁} ▁String ▁confirm ▁= ▁""; ▁boolean ▁conf _ bool ▁= ▁false ; ▁if ▁ (" true " . equals ( request . getParameter (" confirm Action "))) ▁{ ▁if ( addOrRemove . equals (" Add ")) ▁{ ▁conf _ bool ▁= ▁action . add ToList ( pid ); ▁if ( conf _ bool ) ▁confirm ▁= ▁" Patient ▁" ▁+ ▁patientName ▁+ ▁" ▁Added "; ▁} ▁else ▁{ ▁conf _ bool ▁= ▁action . remove From List ( pid ); ▁if ( conf _ bool ) ▁confirm ▁= ▁" Patient ▁" ▁+ ▁patientName ▁+ ▁" ▁Remove d "; ▁} ▁session . remove Attribute (" pid "); ▁} ▁if ▁(!" " . equals ( confirm )) ▁{ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "><%= confirm %></ span > ▁</ div > ▁<% ▁} ▁else ▁{ ▁%> ▁< br ▁/> ▁< form ▁action =" editPatient List . jsp " ▁method =" post "> ▁< input ▁type =" hidden " ▁name =" confirm Action " ▁value =" true "></ input > ▁< input ▁type =" submit " ▁value ="<%= addOrRemove ▁%> ▁<%= patient Name ▁%>"> ▁< input ▁type =" submit " ▁value =" C hoose ▁D ifferent ▁Patient " ▁on Click =" javascript : d ifferent Patient (); "> ▁</ form > ▁< script ▁type =" text / javascript "> ▁function ▁different Patient () ▁{ ▁document . getElement sBy Name (" confirm Action ") [0 ] . value =" false "; ▁document . forms [0 ] . submit (); ▁} ▁</ script > ▁<% ▁} ▁%> ▁< br ▁/> ▁< br ▁/> ▁< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>