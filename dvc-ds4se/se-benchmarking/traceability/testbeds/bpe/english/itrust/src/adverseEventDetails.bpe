▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . util . Date "%> ▁<%@ page ▁import =" java . text . SimpleDateFormat "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Monitor AdverseEvent Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . AdverseEventBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . DBException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . iTrustException "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Adverse ▁Event ▁Details "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁Monitor AdverseEvent Action ▁action ▁= ▁new ▁Monitor AdverseEvent Action ( prodDAO , ▁loggedInMID . longValue ()); ▁if ( request . getParameter (" remove ") ▁ != ▁null ) ▁{ ▁try ▁{ ▁action . remove ( Integer . parse Int ( request . getParameter (" id ")) ); ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Report ▁successfully ▁removed </ span > ▁</ div > ▁<% ▁} ▁catch ( DBException ▁e ) ▁{ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage ()%></ span > ▁</ div > ▁<% ▁} catch ( iTrustException ▁e ) ▁{ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage ()%></ span > ▁</ div > ▁<% ▁} ▁} ▁else ▁if ( request . getParameter (" more Info ") ▁ != ▁null ) ▁{ ▁try { ▁action . sendEmail ( Long . parse Long ( request . getParameter (" patientMID ")) , ▁" I ▁woul d ▁like ▁to ▁know ▁more ▁about ▁your ▁expe r ience ▁with ▁this ▁medication "); ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Request ▁sent </ span > ▁</ div > ▁<% ▁} ▁catch ( DBException ▁e ) ▁{ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage ()%></ span > ▁</ div > ▁<% ▁} ▁} ▁else ▁{ ▁List < AdverseEventBean > ▁events ▁= ▁( List < AdverseEventBean > ) session . get Attribute (" events "); ▁int ▁num ▁= ▁0; ▁String ▁reporter ▁= ▁""; ▁try { ▁num ▁= ▁Integer . parse Int ( request . getParameter (" eventNumber ")); ▁reporter ▁= ▁action . getName ( Long . parse Long ( events . get ( num ) . get MID ()) ); ▁} catch ( NumberFormat Exception ▁e ){ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage () ▁%></ span > ▁</ div > ▁<% ▁} ▁String ▁drug ▁= ▁events . get ( num ) . getDrug () ▁+ ▁" ▁ (" ▁+ ▁events . get ( num ) . get Code () ▁+ ▁" ) "; ▁String ▁date ▁= ▁events . get ( num ) . getDate (); ▁String ▁description ▁= ▁events . get ( num ) . get Description (); ▁%> ▁< form ▁action =" adverseEvent Details . jsp "> ▁< input ▁type =" hidden " ▁name =" id " ▁value ="<%= events . get ( num ) . get Id () ▁%>" ▁/> ▁< input ▁type =" hidden " ▁name =" patientMID " ▁value ="<%= Long . parse Long ( events . get ( num ) . get MID ()) ▁%>" ▁/> ▁< b > Reporter : ▁</ b > ▁< div ><%= report er %></ div > ▁< br ▁/> ▁< b ><%= session . get Attribute (" prescription Immunization ") ▁%> : ▁</ b > ▁< div ><%= drug %></ div > ▁< br ▁/> ▁< b > Date : ▁</ b > ▁< div ><%= date %></ div > ▁< br ▁/> ▁< b > Description : ▁</ b > ▁< div ▁ style =" width :100%; "><%= description %></ div > ▁< br ▁/> ▁< br ▁/> ▁< input ▁type =" submit " ▁value =" Remove ▁Event " ▁name =" remove " ▁/> ▁< input ▁type =" submit " ▁value =" Request ▁Mo re ▁Information " ▁name =" more Info " ▁/> ▁</ form > ▁<% ▁session . remove Attribute (" events "); ▁session . remove Attribute (" prescription Immunization "); ▁} ▁%> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>