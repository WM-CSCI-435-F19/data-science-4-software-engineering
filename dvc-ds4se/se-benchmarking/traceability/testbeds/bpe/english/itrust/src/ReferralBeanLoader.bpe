▁p ackage ▁edu . nc su . cs c . itrust . beans . loaders ; ▁import ▁java . sql . P reparedStatement ; ▁import ▁java . sql . ResultSet ; ▁import ▁java . sql . SQLException ; ▁import ▁java . util . ArrayList ; ▁import ▁java . util . List ; ▁import ▁edu . nc su . cs c . itrust . beans . ReferralBean ; ▁import ▁edu . nc su . cs c . itrust . beans . ReferralBean . ReferralStatus ; ▁/** ▁* ▁A ▁loader ▁for ▁ReferralBean s . ▁* ▁* ▁Load s ▁in ▁information ▁to / from ▁beans ▁using ▁ResultSet s ▁and ▁P reparedStatement s . ▁Use ▁the ▁superclass ▁to ▁enforce ▁consistency . ▁* ▁For ▁details ▁on ▁the ▁para dig m ▁for ▁a ▁loader ▁( and ▁what ▁its ▁methods ▁do ) , ▁see ▁ {@ link ▁BeanLoader } ▁*/ ▁public ▁class ▁ReferralBean Loader ▁implement s ▁BeanLoader < ReferralBean > ▁{ ▁public ▁ReferralBean Loader () ▁{ ▁} ▁public ▁List < ReferralBean > ▁load List ( ResultSet ▁rs ) ▁throw s ▁SQLException ▁{ ▁ArrayList < ReferralBean > ▁list ▁= ▁new ▁ArrayList < ReferralBean > (); ▁while ▁( rs . next ()) ▁{ ▁list . add ( loadSingle ( rs )); ▁} ▁return ▁list ; ▁} ▁public ▁ReferralBean ▁loadSingle ( ResultSet ▁rs ) ▁throw s ▁SQLException ▁{ ▁ReferralBean ▁ref ▁= ▁new ▁ReferralBean (); ▁// ▁ER I C : ▁fixed ▁to ▁correct ▁for ▁the ▁ mysql ▁database ▁bug ▁p la gu ing ▁java ▁1 . 5 ▁ref . set Id ( ( long ) ▁rs . getInt (" id ")); ▁// ref . set Id ( rs . getLong (" id ")); ▁ref . set SenderID ( rs . getLong (" SenderID ")); ▁ref . set ReceiverID ( rs . getLong (" ReceiverID ")); ▁ref . set PatientID ( ( long ) ▁rs . getInt (" PatientID ")); ▁ref . set ReferralDetails ( rs . get String (" ReferralDetails ")); ▁ref . setCon sultationDetails ( rs . get String (" Consultation Details ")); ▁if ▁( rs . get String (" Status "). equals (" Pending ")) ▁ref . set Status ( ReferralStatus . Pending ); ▁else ▁if ▁( rs . get String (" Status "). equals (" Finished ")) ▁ref . set Status ( ReferralStatus . Finished ); ▁else ▁ref . set Status ( ReferralStatus . Declined ); ▁return ▁ref ; ▁} ▁public ▁P reparedStatement ▁load Parameters ( P reparedStatement ▁ps , ▁ReferralBean ▁ref ) ▁throw s ▁SQLException ▁{ ▁ps . s etLong ( 1, ▁ref . getPatientID ()); ▁ps . s etLong (2, ▁ref . get SenderID ()); ▁ps . s etLong ( 3, ▁ref . get ReceiverID ()); ▁ps . set String ( 4, ▁ref . get ReferralDetails ()); ▁ps . set String (5, ▁ref . getCon sultationDetails ()); ▁ps . set String (6, ▁ref . get Status (). to String ()); ▁return ▁ps ; ▁} ▁}