▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . ViewMyMessages Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . MessageBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁My ▁Sent ▁Messages "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁< div ▁align = center > ▁< h 2> My ▁Sent ▁Messages </ h 2> ▁< a ▁href ="/ iTrust / auth / patient / sendMessage . jsp "> Comp ose ▁a ▁Message </ a >< br ▁/>< br ▁/> ▁<% ▁ViewMyMessages Action ▁action ▁= ▁new ▁ViewMyMessages Action ( prodDAO , ▁loggedInMID . longValue ()); ▁List < MessageBean > ▁messages ▁= ▁null ; ▁if ( request . getParameter (" sort by ") ▁ != ▁null ) ▁{ ▁if ( request . getParameter (" sort by "). equals (" name ")) ▁{ ▁if ( request . getParameter (" sort how "). equals (" asce ")) ▁{ ▁messages ▁= ▁action . getAllMy SentMessagesName Ascending (); ▁} ▁else ▁{ ▁messages ▁= ▁action . getAllMy SentMessagesName Descending (); ▁} ▁} ▁else ▁if ( request . getParameter (" sort by "). equals (" time ")) ▁{ ▁if ( request . getParameter (" sort how "). equals (" asce ")) ▁{ ▁messages ▁= ▁action . getAll MySentMessages Time Ascending (); ▁} ▁else ▁{ ▁messages ▁= ▁action . getAll MySentMessages (); ▁} ▁} ▁} ▁else ▁{ ▁messages ▁= ▁action . getAll MySentMessages (); ▁} ▁session . set Attribute (" messages ", ▁messages ); ▁if ▁( messages . size () ▁> ▁0) ▁{ ▁%> ▁< form ▁method =" post " ▁action =" message Outbox . jsp "> ▁< table > ▁< tr > ▁< td > ▁< select ▁name =" sort by "> ▁< option ▁value =" time "> Sort </ option > ▁< option ▁value =" name "> Name </ option > ▁< option ▁value =" time "> Time </ option > ▁</ select > ▁</ td > ▁< td > ▁< select ▁name =" sort how "> ▁< option ▁value =" desc "> O rder </ option > ▁< option ▁value =" asce "> Ascending </ option > ▁< option ▁value =" desc "> Descending </ option > ▁</ select > ▁</ td > ▁< td > ▁< input ▁type =" submit " ▁value =" Sort " ▁/> ▁</ td > ▁</ tr > ▁</ table > ▁</ form > ▁< br ▁/> ▁< table ▁class =" fancyTable "> ▁< tr > ▁< th > To </ th > ▁< th > Subject </ th > ▁< th > Received </ th > ▁< th ></ th > ▁</ tr > ▁<% ▁int ▁index ▁= ▁0; ▁%> ▁<% ▁for ( MessageBean ▁message ▁: ▁messages ) ▁{ ▁%> ▁< tr ▁<%=( index %2 ▁== ▁1 )?" class =\" alt \"":"" ▁%> > ▁< td ><%= ▁action . getName ( message . getTo ()) ▁%></ td > ▁< td ><%= ▁message . get Subject () ▁%></ td > ▁< td ><%= ▁message . getSen tDate () ▁%></ td > ▁< td >< a ▁href =" viewMessage Outbox . jsp ? msg =<%= ▁index ▁%>"> Read </ a ></ td > ▁</ tr > ▁<% ▁index ▁++; ▁%> ▁<% ▁} ▁%> ▁</ table > ▁<% ▁} ▁else ▁{ ▁%> ▁< div > ▁< i > You ▁have ▁no ▁messages </ i > ▁</ div > ▁<% ▁} ▁%> ▁< br ▁/> ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>