▁<%@ ▁page ▁language =" java " ▁content Type =" text / html ; ▁char set = ISO -8859-1" ▁page Encoding =" ISO -8859-1" %> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . SurveyResultBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . HospitalBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . View SurveyResult Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . BeanBuilder "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . HospitalsDAO "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PersonnelBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PersonnelDAO "%> ▁<%@ page ▁import =" java . util . ArrayList "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Survey ▁Results "; ▁ loginMessage ▁= ▁""; ▁session . remove Attribute (" personnelList "); ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁< div ▁align =" center "> ▁< h 2> Search ▁HCP ▁Survey ▁Results </ h 2> ▁<% ▁View SurveyResult Action ▁action ▁= ▁new ▁View SurveyResult Action ( prodDAO , ▁loggedInMID . longValue ()); ▁HospitalsDAO ▁hospitalDAO ▁= ▁new ▁HospitalsDAO ( prodDAO ); ▁List < HospitalBean > ▁hcpHospitals ▁= ▁hospitalDAO . getAll Hospitals (); ▁ SurveyResultBean ▁bean ▁= ▁null ; ▁String ▁ zipCode ▁= ▁""; ▁String ▁hospitalID ▁= ▁""; ▁String ▁specialty ▁= ▁""; ▁List < SurveyResultBean > ▁resultList ▁= ▁null ; ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") ▁ != ▁null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁if ▁( formIsFilled ) ▁{ ▁bean ▁= ▁new ▁ BeanBuilder < SurveyResultBean > (). build ( request ▁ . getParameterMap (), ▁new ▁ SurveyResultBean ()); ▁try ▁{ ▁// set ▁data ▁to ▁be ▁sent ▁from ▁input ▁text ▁box ▁and ▁drop ▁down ▁box ▁ zipCode ▁= ▁request . getParameter (" hcpZip "); ▁hospitalID ▁= ▁request . getParameter (" hcpHospitalID "); ▁specialty ▁= ▁request . getParameter (" hcpSpecialty "); ▁// do ▁not ▁ submit ▁if ▁zip ▁is ▁not ▁filled ▁in ▁if ( (! zipCode . equals ("") ▁&& ▁ zipCode ▁ != ▁null ) ▁&& ▁(! hospitalID . equals ("") ▁&& ▁hospitalID ▁ != ▁null )) ▁{ ▁%>< span ▁> Data ▁for ▁both ▁Zip ▁Code ▁and ▁Hospital ▁ID ▁is ▁not ▁allowed . ▁P lease ▁choose ▁e i ther ▁Zip ▁or ▁Hospital ▁ID . </ span ><% ▁} ▁else ▁if ▁(! zipCode . equals ("") ▁&& ▁ zipCode ▁ != ▁null ) ▁{ ▁bean . setHCP zip ( zipCode ); ▁bean . setHCP specialty ( specialty ); ▁resultList ▁= ▁action . get SurveyResultsFor Zip ( bean ); ▁} ▁else ▁if ▁(! hospitalID . equals ("") ▁&& ▁hospitalID ▁ != ▁null ) ▁{ ▁bean . setHCP hospital ( hospitalID ); ▁bean . setHCP specialty ( specialty ); ▁resultList ▁= ▁action . get SurveyResultsFor Hospital ( bean ); ▁} ▁else ▁{ ▁%>< span ▁> You ▁must ▁enter ▁e i ther ▁a ▁zip ▁code ▁or ▁a ▁hospital ▁ID . </ span ><% ▁} ▁} ▁catch ( FormValidat ionException ▁e ){ ▁e . print HTML ( pageContext . get Out ()); ▁} ▁} ▁%> ▁< form ▁action =" surveyResult s . jsp " ▁method =" post ">< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< br ▁/> ▁< div ▁ style =" width : ▁ 50% ; ▁text - align : left ;"> ▁This ▁search ▁allow s ▁you ▁to ▁search ▁for ▁a ▁HCP ▁based ▁on ▁a ▁zip ▁code ▁or ▁hospital ▁ID . ▁To ▁search , ▁you ▁must ▁enter ▁e i ther ▁a ▁zip ▁code ▁OR ▁a ▁hospital ▁ID , ▁but ▁not ▁both . ▁< br ▁/> Not e : ▁Search ▁by ▁zip ▁code ▁return s ▁all ▁HCPs ▁that ▁have ▁zip ▁codes ▁with ▁a ▁match ▁of ▁the ▁first ▁3 ▁digits . ▁< br ▁/> ▁< br ▁/> ▁</ div > ▁< table > ▁< tr > ▁< td > Zip ▁Code :</ td > ▁< td >< input ▁type =" text " ▁name =" hcpZip " ▁maxlength ="10" ▁size ="10" ▁value ="<%= zipCode %>"> </ td > ▁< td > ▁- ▁OR ▁- </ td > ▁< td > Hospital ▁ID :</ td > ▁< td >< select ▁name =" hcpHospitalID "> ▁< option ▁value =""> N / A </ option > ▁<% for ( HospitalBean ▁ hos ▁: ▁hcpHospitals ) ▁{%> ▁< option ▁value ="<%= hos . get HospitalID ()%>" <% if ▁( hos . get HospitalID (). equals ( hospitalID )) ▁{%> ▁selected =" selected "<%}%>><%= hos . get HospitalID ()%></ option > ▁<%} ▁%> ▁</ select > ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁col span ="5" ▁align =" center "> Specialty ▁( optional ) :</ td > ▁</ tr > ▁< tr > ▁< td ▁col span ="5" ▁align =" center ">< select ▁name =" hcpSpecialty "> ▁< option ▁value ="<%= SurveyResultBean . ANY _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . ANY _ SPECIALTY )) ▁{%> ▁selected =" selected " <%}%> > -- ▁Any ▁ Specialty ▁ --</ option > ▁< option ▁value ="<%= SurveyResultBean . GENERA L _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . GENERA L _ SPECIALTY )) ▁{%> ▁selected =" selected "<%}%>><%= SurveyResultBean . GENERA L _ SPECIALTY %></ option > ▁< option ▁value ="<%= SurveyResultBean . HEA RT _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . HEA RT _ SPECIALTY )) ▁{%> ▁selected =" selected "<%}%>><%= SurveyResultBean . HEA RT _ SPECIALTY %></ option > ▁< option ▁value ="<%= SurveyResultBean . OB GYN _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . OB GYN _ SPECIALTY )) ▁{%> ▁selected =" selected "<%}%>><%= SurveyResultBean . OB GYN _ SPECIALTY %></ option > ▁< option ▁value ="<%= SurveyResultBean . P E DIA TRIC IAN _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . P E DIA TRIC IAN _ SPECIALTY )) ▁{%> ▁selected =" selected "<%}%>><%= SurveyResultBean . P E DIA TRIC IAN _ SPECIALTY %></ option > ▁< option ▁value ="<%= SurveyResultBean . SUR GE ON _ SPECIALTY ▁%> "<% if ▁( specialty . equals ( SurveyResultBean . SUR GE ON _ SPECIALTY )) ▁{%> ▁selected =" selected "<%}%>><%= SurveyResultBean . SUR GE ON _ SPECIALTY %></ option > ▁</ select > ▁</ td > ▁</ tr > ▁< tr > ▁< tr > ▁< td ▁col span = 5 ▁align = center >< input ▁type =" submit " ▁ style =" font - size : ▁16 pt ; ▁ font - weight : ▁bold ; " ▁value =" Search "></ td > ▁</ tr > ▁</ table > ▁</ form > ▁<% ▁if ▁( result List ▁ != ▁null ) ▁{ ▁%> ▁< br ▁/> ▁< h 2> Survey ▁Results </ h 2> ▁<% ▁if ▁( result List . size () ▁== ▁0) ▁{ ▁%> ▁< span ▁class =" iTrust Error "> No ▁HCPs ▁we re ▁found ▁that ▁ me et ▁your ▁search ▁criteria . ▁P lease ▁change ▁your ▁search ▁criteria ▁and ▁search ▁again . ▁</ span > ▁<% ▁} ▁else ▁{ ▁%> ▁< table ▁class =" f Table "> ▁< tr > ▁< th ▁col span =" 14 "> LHCP ▁Search ▁Results :</ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > Doctor ' s ▁Name </ th > ▁< th > Address ▁1 </ th > ▁< th > Address ▁2 </ th > ▁< th > City </ th > ▁< th > State </ th > ▁< th > Zip </ th > ▁< th > Specialty </ th > ▁< th > Hospital </ th > ▁< th > W ait ing ▁R o om < br ▁/> Mi nut es </ th > ▁< th > Ex am ▁R o om < br ▁/> Mi nut es </ th > ▁< th > Visit < br ▁/> Satisfaction </ th > ▁< th > Treatment < br ▁/> Satisfaction </ th > ▁< th > Percent < br ▁/> Results </ th > ▁</ tr > ▁<% ▁List < PersonnelBean > ▁personnelList ▁= ▁new ▁ArrayList < PersonnelBean > (); ▁int ▁index ▁= ▁0; ▁for ▁( SurveyResultBean ▁surveyResult ▁: ▁resultList ) ▁{ ▁%> ▁< tr > ▁< td ▁align = center ▁> ▁< a ▁href ="/ iTrust / auth / view Personnel . jsp ? personnel =<%= index %>"><%= surveyResult . getHCP FirstName ()%> ▁<%= surveyResult . getHCP LastName ()%></ a ></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCPaddress 1 ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCPaddress 2 ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCP city ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCP state ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCP zip ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCP specialty ()%></ td > ▁< td ▁align = center ▁><%= surveyResult . getHCP hospital ()%></ td > ▁< td ▁align = center ▁><%= String . format ("% . 2 f ", ▁surveyResult . getAvg Wa itingRoomMinutes ())%></ td > ▁< td ▁align = center ▁><%= String . format ("% . 2 f ", ▁surveyResult . getAvg ExamRoomMinutes ())%></ td > ▁< td ▁align = center ▁><%= String . format ("% . 2 f ", ▁surveyResult . getAvg V isitSatisfaction ())%></ td > ▁< td ▁align = center ▁><%= String . format ("% . 2 f ", ▁surveyResult . getAvg Treatment Satisfaction ())%></ td > ▁< td ▁align = center ▁><%= String . format ("% . 0 f ", ▁surveyResult . get Percent Satisfaction Results ())%> % </ td > ▁</ tr > ▁<% ▁PersonnelBean ▁personnel ▁= ▁new ▁PersonnelDAO ( prodDAO ) . getPersonnel ( surveyResult . get HCPMID ()); ▁personnelList . add ( personnel ); ▁index ++; ▁} ▁session . set Attribute (" personnelList ", ▁personnelList ); ▁%> ▁</ table > ▁< table > ▁< tr >< td > ▁< i > The ▁search ▁results ▁show ▁the ▁the ▁average s ▁for ▁ each ▁HCP ▁and ▁include :</ i > ▁< ol >< li > Number ▁of ▁minutes ▁patients ▁typically ▁wait ▁in ▁a ▁waiting ▁room ▁< li > A verage ▁number ▁of ▁minutes ▁patients ▁wait ▁in ▁the ▁examin ation ▁room ▁prior ▁to ▁see ing ▁a ▁physician ▁< li > A verage ▁office ▁visit ▁satisfaction ▁< li > A verage ▁satisfaction ▁with ▁treatment / information ▁< li > Percent ▁of ▁office ▁visits ▁for ▁which ▁satisfaction ▁information ▁is ▁available </ ol > ▁</ td ></ tr ></ table > ▁<% ▁} ▁%> ▁<% ▁} ▁%> ▁< br ▁/> ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>