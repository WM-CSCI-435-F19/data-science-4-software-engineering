▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<%@ page ▁import =" java . util . List " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . S earchUsersAction " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁P lease ▁Select ▁a ▁Patient "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁String ▁uid _ pid ▁= ▁request . getParameter (" UID _ PATIENTID "); ▁session . set Attribute (" pid ", ▁uid _ pid ); ▁if ▁( null ▁ != ▁uid _ pid ▁&& ▁! " " . equals ( uid _ pid )) ▁{ ▁response . send Redirect ( request . getParameter (" forward ")); ▁} ▁String ▁firstName ▁= ▁request . getParameter (" FIRST _ NAME "); ▁String ▁lastName ▁= ▁request . getParameter (" LAST _ NAME "); ▁if ( firstName ▁== ▁null ) ▁firstName ▁= ▁""; ▁if ( lastName ▁== ▁null ) ▁lastName ▁= ▁""; ▁%> ▁<%@ include ▁file ="/ util / getUserFrame . jsp "%> ▁< form ▁id =" mainForm " ▁action =" getPatientID . jsp " ▁method =" post "> ▁< table > ▁< tr > ▁< td >< b > Patient :</ b ></ td > ▁< td ▁ style =" width : ▁150 px ; ▁border : ▁1 px ▁solid ▁Gra y ;"> ▁< input ▁name =" forward " ▁type =" hidden " ▁value ="<%= request . getParameter (" forward ") ▁%>" ▁/> ▁< input ▁name =" UID _ PATIENTID " ▁type =" hidden " ▁value =" " ▁/> ▁< input ▁name =" NAME _ PATIENTID " ▁type =" text " ▁readonly ▁value =" Select ▁a ▁Patient "> ▁</ td > ▁< td > ▁< input ▁type =" button " ▁ onclick =" getUser (' PATIENTID ');" ▁value =" Find ▁User " ▁/> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁align =" center " ▁col span ="2"> ▁< input ▁type =" submit " ▁value =" Select ▁Patient " ▁/> ▁</ td > ▁</ tr > ▁</ table > ▁</ form > ▁< table > ▁< tr > ▁</ tr > ▁< form ▁id =" user Search Form " ▁action =" getPatientID . jsp ? forward =<%= ▁request . getParameter (" forward ") ▁%>" ▁method =" post "> ▁< tr > ▁< td >< b > First ▁Name :</ b ></ td > ▁< td ▁ style =" width : ▁150 px ; ▁border : ▁1 px ▁solid ▁Gra y ;"> ▁< input ▁name =" FIRST _ NAME " ▁type =" text " ▁value ="<%= ▁firstName ▁%>" ▁/> ▁</ td > ▁</ tr > ▁< tr > ▁< td >< b > Last ▁Name :</ b ></ td > ▁< td ▁ style =" width : ▁150 px ; ▁border : ▁1 px ▁solid ▁Gra y ;"> ▁< input ▁name =" LAST _ NAME " ▁type =" text " ▁value ="<%= ▁lastName ▁%>" ▁/> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁align =" center " ▁col span ="2"> ▁< input ▁type =" submit " ▁value =" User ▁Search " ▁/> ▁</ td > ▁</ tr > ▁</ form > ▁</ table > ▁<% ▁if ( ▁(!" " . equals ( firstName )) ▁|| ▁(!" " . equals ( lastName ) )){ ▁S earchUsersAction ▁searchAction ▁= ▁new ▁S earchUsersAction ( prodDAO , loggedInMID . longValue ()); ▁out . print ln (" Search ing ▁for ▁user s ▁name d ▁" ▁+ ▁firstName ▁+ ▁" ▁" ▁+ ▁lastName ▁+ ▁"< br ▁/> "); ▁List < PatientBean > ▁patients ▁= ▁searchAction . searchFor Patient sWith Name ( firstName , lastName ); ▁out . print ln (" Found ▁" ▁+ ▁patients . size () ▁+ ▁" ▁Records ▁< br ▁/> "); ▁out . print ln ("< table ▁border =' 1 px ' >< tr >< td ▁width =' 17 5 px '> MID </ td >< td ▁width =' 250 px '> First ▁Name </ td >< td ▁width =' 250 px '> Last ▁Name </ td ></ tr >"); ▁for ( PatientBean ▁p ▁: ▁patients ){ ▁%> ▁< form ▁id =" select Patient <%= ▁String . value Of ( patients . size ()) ▁%>" ▁action =" getPatientID . jsp ? forward =<%= ▁request . getParameter (" forward ") ▁%>" ▁method =" post "> ▁< input ▁type =" hidden " ▁name =" UID _ PATIENTID " ▁value ="<%= ▁p . get MID () ▁%>" ▁/> ▁<% ▁out . print ln ("< tr >< td >< input ▁type =' submit ' ▁width =' 100% ' ▁value =' " ▁+ ▁p . get MID () ▁+ ▁" ' ▁/></ form ></ td >< td > " ▁+ ▁p . get FirstName () ▁+ ▁"</ td >< td > " ▁+ ▁p . get LastName () ▁+ ▁"</ td ></ tr >"); ▁} ▁out . print ln (" </ table >"); ▁} ▁%> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>