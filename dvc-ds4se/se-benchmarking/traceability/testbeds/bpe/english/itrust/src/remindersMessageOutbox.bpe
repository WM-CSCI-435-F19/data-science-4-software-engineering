▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . ViewMyMessages Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . MessageBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Reminders ▁Message ▁ Outbox "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁< div ▁align = center > ▁< h 2> Reminders ▁Message ▁ Outbox </ h 2> ▁<% ▁ViewMyMessages Action ▁action ▁= ▁new ▁ViewMyMessages Action ( prodDAO , ▁ 9 000000009 L ); ▁List < MessageBean > ▁messages ▁= ▁null ; ▁if ( request . getParameter (" sort by ") ▁ != ▁null ) ▁{ ▁if ( request . getParameter (" sort by "). equals (" name ")) ▁{ ▁if ( request . getParameter (" sort how "). equals (" asce ")) ▁{ ▁messages ▁= ▁action . getAllMyMessages Name Ascending (); ▁} ▁else ▁{ ▁messages ▁= ▁action . getAllMyMessages Name Descending (); ▁} ▁} ▁else ▁if ( request . getParameter (" sort by "). equals (" time ")) ▁{ ▁if ( request . getParameter (" sort how "). equals (" asce ")) ▁{ ▁messages ▁= ▁action . getAllMyMessages Time Ascending (); ▁} ▁else ▁{ ▁messages ▁= ▁action . getAllMyMessages (); ▁} ▁} ▁} ▁else ▁{ ▁messages ▁= ▁action . getAllMyMessages (); ▁} ▁session . set Attribute (" messages ", ▁messages ); ▁if ▁( messages . size () ▁> ▁0) ▁{ ▁%> ▁< form ▁method =" post " ▁action =" reminder s Message Outbox . jsp "> ▁< table > ▁< tr > ▁< td > ▁< select ▁name =" sort by "> ▁< option ▁value =" time "> Sort </ option > ▁< option ▁value =" name "> Name </ option > ▁< option ▁value =" time "> Time </ option > ▁</ select > ▁</ td > ▁< td > ▁< select ▁name =" sort how "> ▁< option ▁value =" desc "> O rder </ option > ▁< option ▁value =" asce "> Ascending </ option > ▁< option ▁value =" desc "> Descending </ option > ▁</ select > ▁</ td > ▁< td > ▁< input ▁type =" submit " ▁value =" Sort " ▁/> ▁</ td > ▁</ tr > ▁</ table > ▁</ form > ▁< br ▁/> ▁< table ▁class =" fancyTable "> ▁< tr > ▁< th > To </ th > ▁< th > Subject </ th > ▁< th > S ent </ th > ▁< th ></ th > ▁</ tr > ▁<% ▁int ▁index ▁= ▁0; ▁%> ▁<% ▁for ( MessageBean ▁message ▁: ▁messages ) ▁{ ▁%> ▁< tr ▁<%=( message . get Read () ▁== ▁0)?" ▁ style =\" font - weight : ▁bold ; \"":"" ▁%> ▁<%=( index %2 ▁== ▁1 )?" class =\" alt \"":"" ▁%> > ▁< td ><%= ▁action . getName ( Long . parse Long ( message . get Subject (). substring (0, ▁message . get Subject (). index Of ("::") ))) ▁%></ td > ▁< td ><%= ▁message . get Subject (). substring ( message . get Subject (). index Of ("::") + 2) ▁%></ td > ▁< td ><%= ▁message . getSen tDate () ▁%></ td > ▁< td >< a ▁href =" view Reminder Message . jsp ? msg =<%= ▁index ▁%>"> Read </ a ></ td > ▁</ tr > ▁<% ▁index ▁++; ▁%> ▁<% ▁} ▁%> ▁</ table > ▁<% ▁} ▁else ▁{ ▁%> ▁< div > ▁< i > You ▁have ▁no ▁messages </ i > ▁</ div > ▁<% ▁} ▁%> ▁< br ▁/> ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>