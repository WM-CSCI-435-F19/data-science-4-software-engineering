▁<%@ page ▁language =" java " ▁content Type =" text / html ; ▁char set = ISO -8859-1" ▁page Encoding =" ISO -8859-1" %> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . SurveyBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Survey Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . BeanBuilder "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . iTrustException "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ tag lib ▁uri ="/ W EB - INF / tags . tld " ▁prefix =" itrust "%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Patient ▁Survey "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁<% ▁SurveyAction ▁action ▁= ▁new ▁SurveyAction ( prodDAO , ▁loggedInMID . longValue ()); ▁SurveyBean ▁surveyBean ▁= ▁null ; ▁long ▁visitID ▁= ▁0; ▁// get ▁office ▁visit ▁ID ▁from ▁previous ▁JSP ▁String ▁ visitIDStr ▁= ▁request . getParameter (" ovID "); ▁String ▁ visitDateStr ▁= ▁request . getParameter (" ovDate "); ▁if ( visitIDStr ▁ != ▁null ▁&& ▁! visitIDStr . equals ("")) ▁{ ▁try ▁{ ▁visitID ▁= ▁Long . parse Long ( visitIDStr ); ▁} ▁catch ( Exception ▁e ) ▁{ ▁e . print Stack T race (); ▁} ▁} ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") ▁ != ▁null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁if ( formIsFilled ) ▁{ ▁surveyBean ▁= ▁new ▁ BeanBuilder < SurveyBean > (). build ( request . getParameterMap (), ▁new ▁SurveyBean ()); ▁surveyBean . set VisitID ( visitID ); ▁String ▁ waitingMinutes ▁= ▁request . getParameter (" waitingMinutes String "); ▁if ▁( waitingMinutes ▁ != ▁null ▁&& ▁! waitingMinutes . equals ("")) ▁surveyBean . set Wa itingRoomMinutes ( Integer . parse Int ( waitingMinutes )); ▁String ▁ examMinutes ▁= ▁request . getParameter (" examMinutes String "); ▁if ▁( examMinutes ▁ != ▁null ▁&& ▁! examMinutes . equals ("")) ▁surveyBean . set ExamRoomMinutes ( Integer . parse Int ( examMinutes )); ▁// update ▁satisfaction ▁number ▁in ▁bean ▁if ▁( request . getParameter (" Sat radio s ") ▁ != ▁null ) ▁{ ▁if ▁( request . getParameter (" Sat radio s "). equals (" satRadio 5 ")) ▁{ ▁surveyBean . setVisit Satisfaction ( 5 ); ▁} ▁if ▁( request . getParameter (" Sat radio s "). equals (" satRadio 4 ")) ▁{ ▁surveyBean . setVisit Satisfaction ( 4 ); ▁} ▁if ▁( request . getParameter (" Sat radio s "). equals (" satRadio 3 ")) ▁{ ▁surveyBean . setVisit Satisfaction ( 3 ); ▁} ▁if ▁( request . getParameter (" Sat radio s "). equals (" satRadio 2 ")) ▁{ ▁surveyBean . setVisit Satisfaction ( 2 ); ▁} ▁if ▁( request . getParameter (" Sat radio s "). equals (" satRadio 1")) ▁{ ▁surveyBean . setVisit Satisfaction (1); ▁} ▁} ▁// update ▁treatment ▁number ▁in ▁bean ▁if ▁( request . getParameter (" Tre radio s ") ▁ != ▁null ) ▁{ ▁if ▁( request . getParameter (" Tre radio s "). equals (" treRadio 5 ")) ▁{ ▁surveyBean . setTreatmentSat isfaction ( 5 ); ▁} ▁if ▁( request . getParameter (" Tre radio s "). equals (" treRadio 4 ")) ▁{ ▁surveyBean . setTreatmentSat isfaction ( 4 ); ▁} ▁if ▁( request . getParameter (" Tre radio s "). equals (" treRadio 3 ")) ▁{ ▁surveyBean . setTreatmentSat isfaction ( 3 ); ▁} ▁if ▁( request . getParameter (" Tre radio s "). equals (" treRadio 2 ")) ▁{ ▁surveyBean . setTreatmentSat isfaction ( 2 ); ▁} ▁if ▁( request . getParameter (" Tre radio s "). equals (" treRadio 1")) ▁{ ▁surveyBean . setTreatmentSat isfaction (1); ▁} ▁} ▁try ▁{ ▁// add ▁survey ▁data ▁action . add Survey ( surveyBean , ▁visitID ); ▁response . send Redirect (" v iewMyRecords . jsp ? message = Survey %20 Success fully %20 Submit t ed "); ▁} ▁catch ( Exception ▁e ) ▁{ ▁%>< span ▁><%= e . getMessage ()%></ span ><% ▁} ▁} ▁else { ▁if ( visitDateStr . contains ("< ")) ▁throw ▁new ▁iTrustException (" Illegal ▁parameter ▁for ▁ ovDate . "); ▁} ▁%> ▁< div ▁id = Header > ▁< h 1> iTrust ▁Patient ▁Survey ▁for ▁Office ▁Visit ▁on ▁<%= visitDateStr ▁%></ h 1 ></ div > ▁< div ▁id = Content > ▁< form ▁action =" survey . jsp " ▁method =" post " ▁name =" mainForm "> ▁< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< input ▁type =" hidden " ▁name =" ovID " ▁value ="<%= visitIDStr %>"> ▁< h 3> How ▁long ▁did ▁you ▁have ▁to ▁wait ▁dur ing ▁your ▁visit ?</ h 3> ▁< table > ▁< tr > ▁< td > In ▁the ▁waiting ▁room ?</ td > ▁< td >< input ▁type =" text " ▁name =" waitingMinutes String " ▁maxlength ▁= 3 ▁size = 3 ▁/> ▁</ td > ▁< td > 1 -9 99 ▁minutes </ td > ▁</ tr > ▁< tr > ▁< td > In ▁the ▁examin ation ▁room ▁< br ▁/> before ▁see ing ▁your ▁physician ?</ td > ▁< td >< input ▁type =" text " ▁name =" examMinutes String " ▁maxlength ▁= 3 ▁size = 3 ▁/> ▁</ td > ▁< td > 1 -9 99 ▁minutes </ td > ▁</ tr > ▁</ table > ▁< h 3> How ▁satisfie d ▁we re ▁you ▁with ▁your ▁office ▁visit ?</ h 3> ▁< table >< tr >< td > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Sat radio s " ▁value =" satRadio 5 "> ▁Ver y ▁Satisf ied ▁(5) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Sat radio s " ▁value =" satRadio 4 "> ▁Satisf ied ▁(4 ) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Sat radio s " ▁value =" satRadio 3 "> ▁Mode r ately ▁Satisf ied ▁( 3 ) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Sat radio s " ▁value =" satRadio 2 "> ▁Some what ▁Un happ y ▁(2) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Sat radio s " ▁value =" satRadio 1 "> ▁Ver y ▁Un happ y ▁(1) ▁< br ▁/></ td ></ tr > ▁</ table > ▁< h 3> How ▁satisfie d ▁we re ▁you ▁with ▁the ▁treatment ▁or ▁information ▁you ▁received ?</ h 3> ▁< table >< tr >< td > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Tre radio s " ▁value =" treRadio 5 "> ▁Ver y ▁Satisf ied ▁(5) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Tre radio s " ▁value =" treRadio 4 "> ▁Satisf ied ▁(4 ) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Tre radio s " ▁value =" treRadio 3 "> ▁Mode r ately ▁Satisf ied ▁( 3 ) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Tre radio s " ▁value =" treRadio 2 "> ▁Some what ▁Un happ y ▁(2) ▁< br ▁/></ td ></ tr > ▁< tr >< td >< input ▁align =" left " ▁type =" radio " ▁name =" Tre radio s " ▁value =" treRadio 1 "> ▁Ver y ▁Un happ y ▁(1) ▁< br ▁/></ td ></ tr > ▁</ table > ▁< br ▁/> ▁< br ▁/> ▁< input ▁type =" submit " ▁ style =" font - size : ▁16 pt ; ▁ font - weight : ▁bold ; " ▁value =" Submit ▁Survey "> ▁</ form > ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp "%>