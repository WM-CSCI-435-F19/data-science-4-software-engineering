▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PersonnelBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Edit PersonnelAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . BeanBuilder "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Set SecurityQuestion Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . SecurityQA "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Edit ▁Personnel "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁/* ▁Require ▁a ▁Personnel ▁ID ▁first ▁*/ ▁String ▁pidString = ▁"" ▁+ ▁loggedInMID . longValue (); ▁/* ▁A ▁bad ▁personnel ▁ID ▁gets ▁you ▁ex i l ed ▁to ▁the ▁exception ▁handler ▁*/ ▁Edit PersonnelAction ▁personnelEditor ▁= ▁new ▁Edit PersonnelAction ( prodDAO , loggedInMID . longValue (), ▁pidString ); ▁long ▁pid ▁= ▁personnelEditor . get Pid (); ▁Set SecurityQuestion Action ▁saction ▁= ▁new ▁Set SecurityQuestion Action ( prodDAO , ▁loggedInMID . longValue ()); ▁/* ▁ Now ▁take ▁care ▁of ▁updating ▁information ▁*/ ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") != null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁PersonnelBean ▁personnelForm ; ▁SecurityQA ▁sbean ; ▁if ( formIsFilled ){ ▁personnelForm ▁= ▁new ▁ BeanBuilder < PersonnelBean > (). build ( request . getParameterMap (), new ▁PersonnelBean ()); ▁sbean ▁= ▁new ▁ BeanBuilder < SecurityQA > (). build ( request . getParameterMap (), new ▁SecurityQA ()); ▁try ▁{ ▁personnelEditor . update Information ( personnelForm ); ▁saction . update Information ( s bean ); ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Information ▁Successfully ▁Updated </ span > ▁</ div > ▁<% ▁} ▁catch ( FormValidat ionException ▁e ) ▁{ ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage () ▁%></ span > ▁</ div > ▁<% ▁} ▁} ▁else ▁{ ▁personnelForm ▁= ▁prodDAO . get PersonnelDAO (). getPersonnel ( pid ); ▁sbean ▁= ▁saction . retrieve Information (); ▁} ▁%> ▁< form ▁action =" editM y Demographics . jsp " ▁method =" post "> ▁< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< input ▁type =" hidden " ▁name =" pid " ▁value ="<%= pid %>"> ▁< br ▁/> ▁< div ▁align = center > ▁< table ▁class =" f Table " ▁align = center > ▁< tr >< th ▁col span =2 ▁> Personnel ▁Information </ th ></ tr > ▁< tr >< td ▁class =" subHeader V ertical "> ▁First ▁Name : ▁</ td >< td > ▁< input ▁name =" firstName " ▁value ="<%= personnelForm . get FirstName ()%>" ▁type =" text "> ▁</ td ></ tr > ▁< tr ▁>< td ▁class =" subHeader V ertical "> ▁Last ▁Name : ▁</ td >< td > ▁< input ▁name =" lastName " ▁value ="<%= personnelForm . get LastName ()%>" ▁type =" text "> ▁</ td ></ tr > ▁< tr >< td ▁class =" subHeader V ertical "> ▁Address : ▁</ td >< td > ▁< input ▁name =" streetAddress 1" ▁value ="<%= personnelForm . getStreetAddress 1()%>" ▁type =" text ">< br ▁/> ▁< input ▁name =" streetAddress 2" ▁value ="<%= personnelForm . getStreetAddress 2()%>" ▁type =" text "> ▁</ td ></ tr > ▁< tr ▁>< td ▁class =" subHeader V ertical "> ▁ City : ▁</ td >< td > ▁< input ▁name =" city " ▁value ="<%= personnelForm . get City ()%>" ▁type =" text "> ▁</ td ></ tr > ▁< tr ▁>< td ▁class =" subHeader V ertical "> ▁State : ▁</ td >< td > ▁< itrust : state ▁name =" state " ▁value ="<%= personnelForm . get State ()%>"/> ▁</ td ></ tr > ▁< tr ▁>< td ▁class =" subHeader V ertical "> ▁Zip : ▁</ td >< td > ▁< input ▁name =" zip 1" ▁value ="<%= personnelForm . getZip 1()%>" ▁maxlength ="5" ▁type =" text " ▁size ="5"> ▁- ▁< input ▁name =" zip 2" ▁value ="<%= personnelForm . getZip 2()%>" ▁maxlength ="4" ▁type =" text " ▁size ="4"> ▁</ td ></ tr > ▁< tr ▁>< td ▁class =" subHeader V ertical "> ▁ Phone : ▁</ td >< td > ▁< input ▁name =" phone 1" ▁value ="<%= personnelForm . getPhone 1()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" phone 2" ▁value ="<%= personnelForm . getPhone 2()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" phone 3 " ▁value ="<%= personnelForm . getPhone 3 ()%>" ▁type =" text " ▁size ="4" ▁maxlength ="4"> ▁</ td ></ tr > ▁< tr > ▁< th ▁b g color = silver ▁col span =2> Authentication ▁Information </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Security ▁ Question :</ td > ▁< td >< input ▁name =" question " ▁value ="<%= s bean . get Question ()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Security ▁ Answer :</ td > ▁< td >< input ▁name =" answer " ▁value ="<%= s bean . get Answer ()%>" ▁type =" password "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Confirm ▁Security ▁ Answer :</ td > ▁< td >< input ▁name =" c onfirmAnswer " ▁value ="<%= s bean . get Answer ()%>" ▁type =" password "></ td > ▁</ tr > ▁</ table > ▁</ td ></ tr > ▁< tr > ▁< td ▁col span =2 ▁align = center > ▁< br ▁/> ▁< input ▁type =" submit " ▁name =" action " ▁ style =" font - size : ▁16 pt ; ▁ font - weight : ▁bold ; " ▁value =" Edit ▁Personnel ▁Record "> ▁</ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁</ form > ▁< br ▁/> ▁< div ▁align = center > ▁Note : ▁in ▁order ▁to ▁set ▁the ▁password ▁for ▁this ▁user , ▁use ▁the ▁" Reset ▁Password " ▁link ▁at ▁the ▁login ▁page . ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>