▁p ackage ▁edu . nc su . cs c . itrust . beans . loaders ; ▁import ▁java . sql . Date ; ▁import ▁java . sql . P reparedStatement ; ▁import ▁java . sql . ResultSet ; ▁import ▁java . sql . SQLException ; ▁import ▁java . text . ParseException ; ▁import ▁java . text . SimpleDateFormat ; ▁import ▁java . util . ArrayList ; ▁import ▁java . util . List ; ▁import ▁edu . nc su . cs c . itrust . beans . PatientBean ; ▁/** ▁* ▁A ▁loader ▁for ▁PatientBeans . ▁* ▁* ▁Load s ▁in ▁information ▁to / from ▁beans ▁using ▁ResultSet s ▁and ▁P reparedStatement s . ▁Use ▁the ▁superclass ▁to ▁enforce ▁consistency . ▁* ▁For ▁details ▁on ▁the ▁para dig m ▁for ▁a ▁loader ▁( and ▁what ▁its ▁methods ▁do ) , ▁see ▁ {@ link ▁BeanLoader } ▁*/ ▁public ▁class ▁PatientLoader ▁implement s ▁BeanLoader < PatientBean > ▁{ ▁public ▁List < PatientBean > ▁load List ( ResultSet ▁rs ) ▁throw s ▁SQLException ▁{ ▁List < PatientBean > ▁list ▁= ▁new ▁ArrayList < PatientBean > (); ▁while ▁( rs . next ()) ▁{ ▁list . add ( loadSingle ( rs )); ▁} ▁return ▁list ; ▁} ▁public ▁PatientBean ▁loadSingle ( ResultSet ▁rs ) ▁throw s ▁SQLException ▁{ ▁PatientBean ▁p ▁= ▁new ▁PatientBean (); ▁p . set MID ( rs . getInt (" MID ")); ▁p . set FirstName ( rs . get String (" firstName ")); ▁p . set LastName ( rs . get String (" LastName ")); ▁Date ▁ dateOfBirth ▁= ▁rs . getDate (" Date Of Birth "); ▁if ▁( dateOfBirth ▁ != ▁null ) ▁p . setDate OfBirthStr ( new ▁ SimpleDateFormat (" MM / dd / yyyy "). format ( dateOfBirth )); ▁Date ▁dateOfDeath ▁= ▁rs . getDate (" DateOfDeath "); ▁if ▁( date Of Dea th ▁ != ▁null ) ▁p . setDate OfDeathStr ( new ▁ SimpleDateFormat (" MM / dd / yyyy "). format ( date Of Dea th )); ▁p . set CauseOfDeath ( rs . get String (" CauseOfDeath ")); ▁p . set Email ( rs . get String (" Email ")); ▁p . setStreetAddress 1 ( rs . get String (" address 1")); ▁p . setStreetAddress 2 ( rs . get String (" address 2")); ▁p . set City ( rs . get String (" City ")); ▁p . set State ( rs . get String (" State ")); ▁p . setZip 1 ( ( rs . get String (" Zip 1")) ); ▁p . setZip 2 ( ( rs . get String (" Zip 2 ")) ); ▁p . setPhone 1 ( ( rs . get String (" phone 1")) ); ▁p . setPhone 2 ( ( rs . get String (" phone 2 ")) ); ▁p . setPhone 3 ( ( rs . get String (" phone 3 ")) ); ▁p . set Emergency Name ( rs . get String (" e Name ")); ▁p . set EmergencyPhone 1 ( rs . get String (" ePhone 1")); ▁p . set EmergencyPhone 2 ( rs . get String (" ePhone 2")); ▁p . set EmergencyPhone 3 ( rs . get String (" ePhone 3 ")); ▁p . setIc Name ( rs . get String (" icName ")); ▁p . setIcAddress 1 ( rs . get String (" icAddress 1")); ▁p . setIcAddress 2 ( rs . get String (" icAddress 2")); ▁p . setIc City ( rs . get String (" icCity ")); ▁p . setIc State ( rs . get String (" icState ")); ▁p . setIcZip 1 ( rs . get String (" icZip 1")); ▁p . setIcZip 2 ( rs . get String (" icZip 2")); ▁p . setIcPhone 1 ( rs . get String (" icPhone 1")); ▁p . setIcPhone 2 ( rs . get String (" icPhone 2")); ▁p . setIcPhone 3 ( rs . get String (" icPhone 3 ")); ▁p . setIc ID ( rs . get String (" icID ")); ▁p . set MotherMID ( rs . get String (" MotherMID ")); ▁p . set FatherMID ( rs . get String (" FatherMID ")); ▁p . set BloodType Str ( rs . get String (" BloodType ")); ▁p . set Ethnicity Str ( rs . get String (" Ethnicity ")); ▁p . set Gender Str ( rs . get String (" Gender ")); ▁p . set TopicalNotes ( rs . get String (" TopicalNotes ")); ▁p . set CreditCardType ( rs . get String (" CreditCardType ")); ▁p . set CreditCardNumber ( rs . get String (" CreditCardNumber ")); ▁p . set MessageFilter ( rs . get String (" MessageFilter ")); ▁return ▁p ; ▁} ▁public ▁P reparedStatement ▁load Parameters ( P reparedStatement ▁ps , ▁PatientBean ▁p ) ▁throw s ▁SQLException ▁{ ▁int ▁i ▁= ▁1; ▁ps . set String ( i ++ , ▁p . get FirstName ()); ▁ps . set String ( i ++ , ▁p . get LastName ()); ▁ps . set String ( i ++ , ▁p . getEmail ()); ▁// ▁ps . set String ( i ++ , ▁p . get SecurityQuestion ()); ▁// ▁ps . set String ( i ++ , ▁p . get S ecurityAnswer ()); ▁ps . set String ( i ++ , ▁p . getStreetAddress 1 ()); ▁ps . set String ( i ++ , ▁p . getStreetAddress 2 ()); ▁ps . set String ( i ++ , ▁p . get City ()); ▁ps . set String ( i ++ , ▁p . get State ()); ▁ps . set String ( i ++ , ▁p . getZip 1 ()); ▁ps . set String ( i ++ , ▁p . getZip 2 ()); ▁ps . set String ( i ++ , ▁p . getPhone 1 ()); ▁ps . set String ( i ++ , ▁p . getPhone 2 ()); ▁ps . set String ( i ++ , ▁p . getPhone 3 ()); ▁ps . set String ( i ++ , ▁p . getEmergency Name ()); ▁ps . set String ( i ++ , ▁p . get EmergencyPhone 1 ()); ▁ps . set String ( i ++ , ▁p . get EmergencyPhone 2 ()); ▁ps . set String ( i ++ , ▁p . get EmergencyPhone 3 ()); ▁ps . set String ( i ++ , ▁p . getIc Name ()); ▁ps . set String ( i ++ , ▁p . getIcAddress 1 ()); ▁ps . set String ( i ++ , ▁p . getIcAddress 2 ()); ▁ps . set String ( i ++ , ▁p . getIc City ()); ▁ps . set String ( i ++ , ▁p . getIc State ()); ▁ps . set String ( i ++ , ▁p . getIcZip 1 ()); ▁ps . set String ( i ++ , ▁p . getIcZip 2 ()); ▁ps . set String ( i ++ , ▁p . getIcPhone 1 ()); ▁ps . set String ( i ++ , ▁p . getIcPhone 2 ()); ▁ps . set String ( i ++ , ▁p . getIcPhone 3 ()); ▁ps . set String ( i ++ , ▁p . getIc ID ()); ▁Date ▁date ▁= ▁null ; ▁try ▁{ ▁date ▁= ▁new ▁java . sql . Date ( new ▁ SimpleDateFormat (" MM / dd / yyyy "). parse ( p . getDateOfBirth Str ()) ▁ . getTime ()); ▁} ▁catch ▁( ParseException ▁e ) ▁{ ▁e . print Stack T race (); ▁} ▁ps . setDate ( i ++ , ▁date ); ▁date ▁= ▁null ; ▁try ▁{ ▁date ▁= ▁new ▁java . sql . Date ( new ▁ SimpleDateFormat (" MM / dd / yyyy "). parse ( p . getDateOfDeath Str ()) ▁ . getTime ()); ▁} ▁catch ▁( ParseException ▁e ) ▁{ ▁if ▁ (" " . equals ( p . getDateOfDeath Str ())) ▁date ▁= ▁null ; ▁else ▁e . print Stack T race (); ▁} ▁ps . setDate ( i ++ , ▁date ); ▁ps . set String ( i ++ , ▁p . get CauseOfDeath ()); ▁ps . set String ( i ++ , ▁p . get MotherMID ()); ▁ps . set String ( i ++ , ▁p . get FatherMID ()); ▁ps . set String ( i ++ , ▁p . get BloodType (). getName ()); ▁ps . set String ( i ++ , ▁p . get Ethnicity (). getName ()); ▁ps . set String ( i ++ , ▁p . get Gender (). getName ()); ▁ps . set String ( i ++ , ▁p . get TopicalNotes ()); ▁ps . set String ( i ++ , ▁p . get CreditCardType ()); ▁ps . set String ( i ++ , ▁p . get CreditCardNumber ()); ▁ps . set String ( i ++ , ▁p . get MessageFilter ()); ▁return ▁ps ; ▁} ▁}