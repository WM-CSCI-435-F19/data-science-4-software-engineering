▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Add RemoteMonitoring DataAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . Edit Representatives Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Report ▁Status "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁<% ▁/* ▁Require ▁a ▁Patient ▁ID ▁first ▁*/ ▁long ▁patientMID ; ▁boolean ▁representative Reporting ▁= ▁false ; ▁String ▁ reportingFor ▁= ▁( String ) request . getParameter (" reportingFor "); ▁if ( reportingFor ▁== ▁null ▁|| ▁1 ▁> ▁ reportingFor . length () ▁|| ▁ reportingFor . equals (" null ")) ▁{ ▁patientMID ▁= ▁loggedInMID . longValue (); ▁// If ▁self - report ing ▁} ▁else ▁{ ▁patientMID ▁= ▁Long . parse Long ( reportingFor ); ▁representative Reporting ▁= ▁true ; ▁} ▁Add RemoteMonitoring DataAction ▁action ▁= ▁new ▁Add RemoteMonitoring DataAction ( ▁prodDAO , ▁loggedInMID . longValue (), ▁patientMID ); ▁/* ▁Update ▁information ▁*/ ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") ▁ != ▁null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁if ▁( formIsFilled ) ▁{ ▁try ▁{ ▁if ▁( request . getParameter (" glucoseLevel ") ▁== ▁null ▁|| ▁"" . equals ( request . getParameter (" glucoseLevel ")) ){ ▁action . add RemoteMonitoring Data ( Integer . parse Int ( request . getParameter (" systolic BloodPressure ")) , ▁Integer . parse Int ( request . getParameter (" diastolic BloodPressure ")) ); ▁} ▁else ▁if ▁( request . getParameter (" systolic BloodPressure ") ▁== ▁null ▁|| ▁"" . equals ( request . getParameter (" systolic BloodPressure ")) ){ ▁action . add RemoteMonitoring Data ( Integer . parse Int ( request . getParameter (" glucoseLevel ")) ); ▁} ▁else ▁{ ▁action . add RemoteMonitoring Data ( ▁Integer . parse Int ( request . getParameter (" systolic BloodPressure ")) , ▁Integer . parse Int ( request . getParameter (" diastolic BloodPressure ")) , ▁Integer . parse Int ( request . getParameter (" glucoseLevel ")) ); ▁} ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Information ▁Successfully ▁Added </ span > ▁</ div > ▁<% ▁} ▁catch ▁( FormValidat ionException ▁e ) ▁{ ▁ formIsFilled ▁= ▁false ; ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage () ▁%></ span > ▁</ div > ▁<% ▁} ▁catch ( NumberFormat Exception ▁e ) ▁{ ▁ formIsFilled ▁= ▁false ; ▁%> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "> I nvalid ▁entry : ▁<%= e . getMessage () ▁%> . ▁P lease ▁enter ▁a ▁who le ▁number . </ span > ▁</ div > ▁<% ▁} ▁} ▁if (! formIsFilled ) ▁{ ▁%> ▁< form ▁action =" add Telemedicine Data . jsp " ▁method =" post "> ▁< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< input ▁type =" hidden " ▁name =" reportingFor " ▁value ="<%= ( String ) request . getParameter (" reportingFor ") %>"> ▁< br ▁/> ▁< table ▁cell spac ing =0 ▁align = center ▁cell padding =0 > ▁< tr >< th > ▁<%=( patientMID ▁== ▁loggedInMID . longValue ()) ▁? ▁" S el f - Reporting " : " Report ▁for ▁" ▁+ ▁action . get PatientName ( patientMID ) ▁%> ▁</ th ></ tr > ▁< tr > ▁< td ▁v align = top > ▁< table ▁class =" f Table " ▁align = center ▁ style =" width : ▁350 px ;"> ▁< tr > ▁< td ▁class =" subHeader V ertical "> Systolic ▁Blood ▁Pressure :</ td > ▁< td >< input ▁name =" systolic BloodPressure " ▁value =" " ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Diastolic ▁Blood ▁Pressure :</ td > ▁< td >< input ▁name =" diastolic BloodPressure " ▁value =" " ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Glucose ▁Level :</ td > ▁< td >< input ▁name =" glucoseLevel " ▁value =" " ▁type =" text "></ td > ▁</ tr > ▁</ table > ▁</ td > ▁< td ▁width ="15 px "> & nb sp ; </ td > ▁< td ▁v align = top > ▁</ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< div ▁align =" center ">< input ▁type =" submit " ▁name =" action " ▁ style =" font - weight : ▁bold ; " ▁value =" Report "> ▁< br ▁/> ▁< br ▁/> ▁< br ▁/> ▁<% ▁if (! representative Reporting ) ▁{ ▁%> ▁< table ▁class =" f Table " ▁align = center > ▁< th > Patient ▁ Representative ▁ Reporting </ th > ▁<% ▁Edit Representatives Action ▁reps Action ▁= ▁new ▁Edit Representatives Action ( ▁prodDAO , ▁0 L , ▁Long . to String ( patientMID )); ▁List < PatientBean > ▁patients ▁= ▁reps Action . get Represented ( patientMID ); ▁if ( patients . size () ▁== ▁0) ▁{ ▁%> ▁< tr ▁class =" subHeader "> ▁< th > No ▁Patients ▁ Represented </ th > ▁</ tr > ▁<% ▁} ▁else ▁{ ▁%> ▁< tr ▁class =" subHeader "> ▁< th > Patient </ th > ▁</ tr > ▁<% ▁} ▁for ( PatientBean ▁p ▁: ▁patients ) ▁{ ▁%> ▁< tr >< td >< a ▁href ="# " ▁ onclick =" javascript : document . getElement sBy Name (' formIsFilled ')[ 0 ] . value =' false '; document . getElement sBy Name (' reportingFor ')[ 0 ] . value ='<%= p . get MID ()%>' ; document . forms [0 ] . submit (); "><%= p . getF ullName () ▁%></ a ></ td ></ tr > ▁<% ▁} ▁%> ▁</ table > ▁</ div > ▁</ form > ▁<% ▁} ▁} ▁%> ▁< br ▁/> ▁< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp "%>