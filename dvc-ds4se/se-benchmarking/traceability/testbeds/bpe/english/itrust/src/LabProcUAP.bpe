▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . LabProcedureBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . E ditPatientAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . LabProcUAPAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PatientDAO "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁Laboratory ▁Procedures "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁ LabProcUAPAction ▁action ▁= ▁new ▁ LabProcUAPAction ( prodDAO , ▁loggedInMID . longValue ()); ▁/* ▁Require ▁a ▁Patient ▁ID ▁first ▁*/ ▁String ▁pidString ▁= ▁( String ) session . get Attribute (" pid "); ▁if ▁( pidString ▁== ▁null ▁|| ▁1 ▁> ▁pidString . length ()) ▁{ ▁response . send Redirect ("/ iTrust / auth / getPatientID . jsp ? forward = hcp - uap / LabProcUAP . jsp "); ▁return ; ▁} ▁else ▁{ ▁session . remove Attribute (" pid "); ▁} ▁/* ▁If ▁the ▁patient ▁id ▁does n ' t ▁check ▁out , ▁then ▁kick ▁' em ▁out ▁to ▁the ▁exception ▁handler ▁*/ ▁E ditPatientAction ▁e p action ▁= ▁new ▁E ditPatientAction ( prodDAO , loggedInMID . longValue (), pidString ); ▁long ▁pid ▁= ▁e p action . get Pid (); ▁List < LabProcedureBean > ▁proc ▁= ▁action . view Procedures ( pid ); ▁%> ▁< br ▁/> ▁< table ▁class =" f Table " ▁align = center > ▁< tr > ▁< th ▁col span ="11"> Laboratory ▁Procedures </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > Patient </ th > ▁< th > Lab ▁Code </ th > ▁< th > Rights </ th > ▁< th > Status </ th > ▁< th > Commentary </ th > ▁< th > Results </ th > ▁< th > OfficeVisitID </ th > ▁< th > Updated ▁Date </ th > ▁< th > Action </ th > ▁</ tr > ▁<% for ( LabProcedureBean ▁bean ▁: ▁proc ){ ▁PatientBean ▁patient ▁= ▁new ▁PatientDAO ( prodDAO ) . getPatient ( bean . get Pid ()); %> ▁< tr > ▁< td ▁><%= patient . getF ullName ()%></ td > ▁< td ▁><%= bean . getLo inc ()%></ td > ▁< td ▁><%= bean . get Rights ()%></ td > ▁< td ▁><%= bean . get Status ()%></ td > ▁< td ▁><%= bean . get Commentary ()%></ td > ▁< td ▁><%= bean . get Results ()%></ td > ▁< td ▁><%= bean . getOv ID ()%></ td > ▁< td ▁><%= bean . get Timestamp ()%></ td > ▁< td ▁> ▁< a ▁href =" update LabProc . jsp ? ID =<%= bean . get ProcedureID ()%>"> Update </ a > ▁</ td > ▁</ tr > ▁<%} ▁%> ▁</ table > ▁< br ▁/>< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp " ▁%>