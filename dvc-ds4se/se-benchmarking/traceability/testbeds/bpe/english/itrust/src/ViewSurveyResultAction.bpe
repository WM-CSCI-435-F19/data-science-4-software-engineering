▁p ackage ▁edu . nc su . cs c . itrust . action ; ▁import ▁java . util . List ; ▁import ▁edu . nc su . cs c . itrust . beans . SurveyResultBean ; ▁import ▁edu . nc su . cs c . itrust . dao . DAOFactory ; ▁import ▁edu . nc su . cs c . itrust . dao . mysql . SurveyResultDAO ; ▁import ▁edu . nc su . cs c . itrust . dao . mysql . TransactionDAO ; ▁import ▁edu . nc su . cs c . itrust . enums . TransactionType ; ▁import ▁edu . nc su . cs c . itrust . exception . FormValidat ionException ; ▁import ▁edu . nc su . cs c . itrust . exception . iTrustException ; ▁import ▁edu . nc su . cs c . itrust . validate . Survey SearchValidator ; ▁/** ▁* ▁This ▁class ▁is ▁used ▁to ▁handle ▁retriev ing ▁survey ▁results ▁from ▁the ▁database . ▁It ▁also ▁log s ▁the ▁transaction . ▁*/ ▁public ▁class ▁View SurveyResult Action ▁{ ▁private ▁SurveyResultDAO ▁surveyResultDAO ; ▁private ▁TransactionDAO ▁transDAO ; ▁private ▁Survey SearchValidator ▁validator ; ▁long ▁loggedInMID ; ▁/** ▁* ▁Set ▁up ▁defaults . ▁* ▁@ param ▁factory ▁The ▁DAOFactory ▁used ▁to ▁create ▁the ▁DAOs ▁used ▁in ▁this ▁action . ▁* ▁@ param ▁loggedInMID ▁The ▁MID ▁of ▁the ▁person ▁retriev ing ▁survey ▁results . ▁*/ ▁public ▁View SurveyResult Action ( DAOFactory ▁factory , ▁long ▁loggedInMID ) ▁{ ▁transDAO ▁= ▁factory . get TransactionDAO (); ▁surveyResultDAO ▁= ▁factory . get SurveyResultDAO (); ▁this . loggedInMID ▁= ▁loggedInMID ; ▁validator ▁= ▁new ▁Survey SearchValidator (); ▁} ▁/** ▁* ▁Retrieve s ▁survey ▁results ▁for ▁a ▁who le ▁hospital . ▁* ▁@ param ▁bean ▁The ▁ SurveyResultBean ▁containing ▁the ▁survey ▁result ▁spec s . ▁* ▁@ return ▁A ▁java . util . List ▁of ▁Survey ▁Results . ▁* ▁@ throw s ▁iTrustException ▁* ▁@ throw s ▁ FormValidat ionException ▁*/ ▁public ▁List < SurveyResultBean > ▁get SurveyResultsFor Hospital ( SurveyResultBean ▁bean ) ▁throw s ▁iTrustException , ▁ FormValidat ionException ▁{ ▁transDAO . log Transaction ( TransactionType . View _ HCP _ SURVEY _ RESULTS , ▁loggedInMID , ▁0, ▁" search ed ▁results ▁by ▁HCP ▁hospital ▁ID "); ▁return ▁surveyResultDAO . get SurveyResultsFor Hospital ( bean . getHCP hospital (), ▁bean . getHCP specialty ()); ▁} ▁/** ▁* ▁Retrieve s ▁survey ▁results ▁for ▁a ▁given ▁zip ▁code . ▁* ▁@ param ▁bean ▁The ▁ SurveyResultBean ▁containing ▁the ▁survey ▁result ▁spec s . ▁* ▁@ return ▁A ▁java . util . List ▁of ▁Survey ▁Results . ▁* ▁@ throw s ▁iTrustException ▁* ▁@ throw s ▁ FormValidat ionException ▁*/ ▁public ▁List < SurveyResultBean > ▁get SurveyResultsFor Zip ( SurveyResultBean ▁bean ) ▁throw s ▁iTrustException , ▁ FormValidat ionException ▁{ ▁validator . validate ( bean ); ▁transDAO . log Transaction ( TransactionType . View _ HCP _ SURVEY _ RESULTS , ▁loggedInMID , ▁0, ▁" search ed ▁results ▁by ▁HCP ▁zip ▁code "); ▁return ▁surveyResultDAO . get SurveyResultsFor Zip ( bean . getHCP zip (), ▁bean . getHCP specialty ()); ▁} ▁}