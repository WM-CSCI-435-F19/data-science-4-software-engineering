▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . OfficeVisitBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . View OfficeVisit Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . DiagnosisBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . ProcedureBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PrescriptionBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PersonnelBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PersonnelDAO "%> ▁<%@ page ▁import =" java . util . ArrayList "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld " ▁%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁Office ▁Visit ▁Details "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁<% ▁session . remove Attribute (" personnelList "); ▁String ▁ovID ▁= ▁request . getParameter (" ovID "); ▁String ▁ repMID ▁= ▁request . getParameter (" repMID "); ▁View OfficeVisit Action ▁action ▁= ▁null ; ▁if ( repMID ▁ != ▁null ){ ▁// This ▁constructor ▁checks ▁that ▁the ▁representative ▁is ▁correct ▁action ▁= ▁new ▁View OfficeVisit Action ( prodDAO , ▁loggedInMID . longValue (), ▁ repMID , ▁ovID ); ▁} ▁else { ▁action ▁= ▁new ▁View OfficeVisit Action ( prodDAO , ▁loggedInMID . longValue (), ovID ); ▁} ▁/* ▁( if ( request . getParameter () ▁*/ ▁OfficeVisitBean ▁ov ▁= ▁action . getOfficeVisit (); ▁String ▁hcpName ▁= ▁action . get HCPName ( ov . getHcp ID ()); ▁%> ▁< br ▁/> ▁< table ▁class =" f Table " ▁align =" center "> ▁< tr >< th ▁col span =2> Office ▁Visit ▁Details </ th ></ tr > ▁< tr > ▁< td ▁class =" subHeader "> Date :</ td > ▁< td ><%= ov . getVisitDate Str ()%></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader "> HCP :</ td > ▁<% ▁List < PersonnelBean > ▁personnelList ▁= ▁new ▁ArrayList < PersonnelBean > (); ▁int ▁index ▁= ▁0; ▁%> ▁< td >< a ▁href ="/ iTrust / auth / view Personnel . jsp ? personnel =<%= index %>"><%= hcp Name %></ a ></ td > ▁<% ▁PersonnelBean ▁personnel ▁= ▁new ▁PersonnelDAO ( prodDAO ) . getPersonnel ( ov . getHcp ID ()); ▁personnelList . add ( personnel ); ▁index ++; ▁session . set Attribute (" personnelList ", ▁personnelList ); ▁%> ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader "> Notes :</ td > ▁< td > ▁<%= ▁ov . get Notes () ▁%> ▁</ td > ▁</ tr > ▁</ table > ▁< br ▁/>< br ▁/> ▁< table ▁class =" f Table " ▁align =" center " ▁> ▁< tr > ▁< th ▁col span ="2"> Diagnoses </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th > ICD ▁Code </ th > ▁< th > Description </ th > ▁</ tr > ▁<% ▁if ▁( ov . getDiagnose s (). size () ▁== ▁0) ▁{ ▁%> ▁< tr > ▁< td ▁col span ="2" ▁> No ▁Diagnoses ▁for ▁this ▁visit </ td > ▁</ tr > ▁<% ▁} ▁else ▁{ ▁for ( DiagnosisBean ▁d ▁: ▁ov . getDiagnose s ()) ▁{%> ▁< tr > ▁< td ▁>< itrust : icd 9 cm ▁code ="<%= d . getICDCode ()%>"/> </ td > ▁< td ▁ style =" white - space : ▁nowrap ;"><%= d . get Description () ▁%></ td > ▁</ tr > ▁<%} ▁} ▁%> ▁</ table > ▁< br ▁/>< br ▁/> ▁< table ▁class =" f Table " ▁align =" center " ▁> ▁< tr > ▁< th ▁col span ="5" ▁ style =" back g round - color : silver ;"> Medication s </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< td > NDCode </ td > ▁< td > Description </ td > ▁< td > Date ▁of ▁ Usage </ td > ▁< td > Dosage </ td > ▁< td > Instructions </ td > ▁</ tr > ▁<% ▁if ▁( ov . getPrescriptions (). size () ▁== ▁0) ▁{ ▁%> ▁< tr > ▁< td ▁col span ="5" ▁class ▁= ▁" value C ell " ▁align =" center "> No ▁Medication s ▁on ▁record </ td > ▁</ tr > ▁<% ▁} ▁else ▁{ ▁for ( PrescriptionBean ▁m ▁: ▁ov . getPrescriptions ()) ▁{ ▁%> ▁< tr > ▁< td ▁class ▁= ▁" value C ell "><%= m . get Medication (). getNDCode Formatted ()%></ td > ▁< td ▁class ▁= ▁" value C ell "><%= m . get Medication (). get Description () ▁%></ td > ▁< td ▁class ▁= ▁" value C ell "><%= m . getStartDate Str ()%> ▁to ▁<%= m . getEndDate Str ()%></ td > ▁< td ▁class ▁= ▁" value C ell "><%= m . get Dosage ()%> mg </ td > ▁< td ▁class ▁= ▁" value C ell "><%= m . get Instructions ()%></ td > ▁</ tr > ▁<% ▁} ▁} ▁%> ▁</ table > ▁< br ▁/>< br ▁/> ▁< table ▁class =" f Table " ▁align =" center " ▁> ▁< tr > ▁< th ▁col span ="2" ▁ style =" back g round - color : silver ;"> Procedures </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< td > CPT ▁Code </ td > ▁< td > Description </ td > ▁</ tr > ▁<% ▁if ▁( ov . get Procedures (). size () ▁== ▁0) ▁{ ▁%> ▁< tr > ▁< td ▁col span ="2" ▁> No ▁Procedures ▁on ▁record </ td > ▁</ tr > ▁<% ▁} ▁else ▁{ ▁for ( ProcedureBean ▁p ▁: ▁ov . get Procedures ()) ▁{%> ▁< tr > ▁< td ▁><%= p . getCPTCode () ▁%></ td > ▁< td ▁><%= p . get Description () ▁%></ td > ▁</ tr > ▁<% ▁} ▁} ▁%> ▁</ table > ▁< br ▁/> ▁<%@ include ▁file ="/ f ooter . jsp "%>