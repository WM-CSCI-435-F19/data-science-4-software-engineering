▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . ViewMyMessages Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . MessageBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ tag lib ▁uri ="/ W EB - INF / tags . tld " ▁prefix =" itrust " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁My ▁Messages "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁< div ▁align =" center "> ▁< h 2> My ▁Messages </ h 2> ▁<% ▁ViewMyMessages Action ▁action ▁= ▁new ▁ViewMyMessages Action ( prodDAO , ▁loggedInMID . longValue ()); ▁List < MessageBean > ▁messages ▁= ▁action . getAllMyMessages (); ▁session . set Attribute (" messages ", ▁messages ); ▁if ▁( messages . size () ▁> ▁0) ▁{ ▁%> ▁< table ▁class =" f Table "> ▁< tr > ▁< th > Sender </ th > ▁< th > Message </ th > ▁< th > Received </ th > ▁< th > & nb sp ; </ th > ▁</ tr > ▁<% ▁int ▁index ▁= ▁0; ▁%> ▁<% ▁for ( MessageBean ▁message ▁: ▁messages ) ▁{ ▁%> ▁< tr > ▁< td ><%= ▁action . getPersonnel Name ( message . get From ()) ▁%></ td > ▁< td ><%= ▁message . getBody () ▁%></ td > ▁< td ><%= ▁message . getSen tDate () ▁%></ td > ▁< td >< a ▁href =" reply . jsp ? msg =<%= ▁index ▁%>"> Reply </ a ></ td > ▁</ tr > ▁<% ▁index ▁++; ▁%> ▁<% ▁} ▁%> ▁</ table > ▁<% ▁} ▁else ▁{ ▁%> ▁< div > ▁< i > You ▁have ▁no ▁messages </ i > ▁</ div > ▁<% ▁} ▁%> ▁< br ▁/>< br ▁/> ▁</ div > ▁<%@ include ▁file ="/ f ooter . jsp "%>