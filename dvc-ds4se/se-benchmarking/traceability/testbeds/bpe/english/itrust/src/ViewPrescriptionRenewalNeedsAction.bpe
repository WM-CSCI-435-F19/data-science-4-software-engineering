▁p ackage ▁edu . nc su . cs c . itrust . action ; ▁import ▁java . util . List ; ▁import ▁edu . nc su . cs c . itrust . beans . PatientBean ; ▁import ▁edu . nc su . cs c . itrust . dao . DAOFactory ; ▁import ▁edu . nc su . cs c . itrust . dao . mysql . PatientDAO ; ▁import ▁edu . nc su . cs c . itrust . dao . mysql . TransactionDAO ; ▁import ▁edu . nc su . cs c . itrust . enums . TransactionType ; ▁import ▁edu . nc su . cs c . itrust . exception . DBException ; ▁import ▁edu . nc su . cs c . itrust . Messages ; ▁/* ▁* ▁This ▁action ▁return s ▁a ▁list ▁of ▁patients ▁with ▁a ▁special - diagnosis - h istory ▁who ▁* ▁have ▁the ▁logged ▁in ▁HCP ▁as ▁a ▁D HCP ▁and ▁who se ▁medications ▁are ▁go ing ▁to ▁* ▁expire ▁within ▁seve n ▁days . ▁*/ ▁public ▁class ▁View PrescriptionRe newalNeedsAction ▁{ ▁private ▁PatientDAO ▁patientDAO ; ▁private ▁TransactionDAO ▁transDAO ; ▁private ▁long ▁loggedInMID ; ▁/** ▁* ▁Set ▁up ▁defaults ▁* ▁* ▁@ param ▁factory ▁The ▁DAOFactory ▁used ▁to ▁create ▁the ▁DAOs ▁used ▁in ▁this ▁action . ▁* ▁@ param ▁loggedInMID ▁The ▁MID ▁of ▁the ▁person ▁viewing ▁the ▁prescription ▁renewal s . ▁*/ ▁public ▁View PrescriptionRe newalNeedsAction ( DAOFactory ▁factory , ▁long ▁loggedInMID ) ▁{ ▁this . patientDAO ▁= ▁factory . get PatientDAO (); ▁this . transDAO ▁= ▁factory . get TransactionDAO (); ▁this . loggedInMID ▁= ▁loggedInMID ; ▁} ▁/** ▁* ▁Use s ▁PatientDAO ▁as ▁a ▁ helper ▁class ▁to ▁return ▁a ▁list ▁of ▁patients ▁with ▁a ▁special - diagnosis - h istory ▁who ▁* ▁have ▁the ▁logged ▁in ▁HCP ▁as ▁a ▁D HCP ▁and ▁who se ▁medications ▁are ▁go ing ▁to ▁* ▁expire ▁within ▁seve n ▁days . ▁* ▁* ▁@ return ▁A ▁list ▁of ▁PatientBean ' s ▁*/ ▁public ▁List < PatientBean > ▁get RenewalNeeds Patients () ▁{ ▁try ▁{ ▁transDAO . log Transaction ( TransactionType . VI EW _ RE NEW AL _ N E ED S _ PATIENT S , ▁loggedInMID , ▁0 L , ▁loggedInMID ▁+ ▁Messages . get String (" View PrescriptionRe newalNeedsAction . 0 ")); ▁// $ NON - NL S -1 $ ▁return ▁patientDAO . get RenewalNeeds Patients ( loggedInMID ); ▁} ▁catch ▁( DBException ▁e ) ▁{ ▁System . out . print ln ( Messages . get String (" View PrescriptionRe newalNeedsAction . 1")); ▁// $ NON - NL S -1 $ ▁System . out . print ln ( e ); ▁return ▁null ; ▁} ▁} ▁}