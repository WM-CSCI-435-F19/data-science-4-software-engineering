▁<%@ tag lib ▁uri ="/ W EB - INF / tags . tld " ▁prefix =" itrust "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . util . Date "%> ▁<%@ page ▁import =" java . text . SimpleDateFormat "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . RemoteMonitoring DataBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . ViewMy RemoteMonitoring ListAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PatientDAO " ▁%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁View ▁Additional ▁Info "; ▁%> ▁<%@ include ▁file ="/ header . jsp " ▁%> ▁<% ▁int ▁ patientIndex ▁= ▁0; ▁if ( request . getParameter (" patient ") ▁ != ▁null ){ ▁String ▁patient ▁= ▁request . getParameter (" patient "); ▁session . set Attribute (" patient ", ▁patient ); ▁ patientIndex ▁= ▁Integer . parse Int ( patient ); ▁} ▁else { ▁String ▁patient ▁= ▁( String ) ▁session . get Attribute (" patient "); ▁ patientIndex ▁= ▁Integer . parse Int ( patient ); ▁} ▁List < RemoteMonitoring DataBean > ▁patient List ▁= ▁( List < RemoteMonitoring DataBean > ) ▁session . get Attribute (" patientList "); ▁ RemoteMonitoring DataBean ▁r md b ▁= ▁patient List . get ( patientIndex ); ▁PatientDAO ▁patDAO ▁= ▁prodDAO . get PatientDAO (); ▁long ▁patientMID ▁= ▁r md b . get PatientMID (); ▁PatientBean ▁p ▁= ▁patDAO . getPatient ( patientMID ); ▁ViewMy RemoteMonitoring ListAction ▁list Action ▁= ▁new ▁ViewMy RemoteMonitoring ListAction ( prodDAO , loggedInMID . longValue ()); ▁String ▁startDate ▁= ▁new ▁ SimpleDateFormat (" MM / dd / yyyy "). format ( new ▁Date ()); ▁String ▁endDate ▁= ▁new ▁ SimpleDateFormat (" MM / dd / yyyy "). format ( new ▁Date ()); ▁if (" date " . equals ( request . getParameter (" sortBy "))) ▁{ ▁startDate ▁= ▁request . getParameter (" startDate "); ▁endDate ▁= ▁request . getParameter (" endDate "); ▁%> ▁< br ▁/> ▁< table ▁class =" f Table " ▁align =" center "> ▁< tr > ▁< th ▁col span ="2"> Patient ▁Details </ th > ▁</ tr > ▁< tr ▁> ▁< td ▁class =" subHeader V ertical "> Name :</ td > ▁< td ><%= p . getF ullName ()%></ td > ▁</ tr > ▁< tr ▁> ▁< td ▁class =" subHeader V ertical "> Phone :</ td > ▁< td ><%= p . getPhone ()%></ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁<% ▁List < PatientBean > ▁patient Representatives ▁= ▁patDAO . get Representing ( patientMID ); ▁%> ▁< br ▁/> ▁< table ▁class =" f Table " ▁align =" center "> ▁< tr > ▁< th ▁col span ="4"> Patient ' s ▁Representatives </ th > ▁</ tr > ▁<% ▁if ( patient Representatives . is Empty ()){ ▁%> ▁< tr > ▁< td > This ▁patient ▁has ▁no ▁representatives . </ td > ▁</ tr > ▁<% ▁} ▁for ( PatientBean ▁pat ▁: ▁patient Representatives ){ ▁%> ▁< tr > ▁< td ▁class =" subHeader V ertical "> Name :</ td > ▁< td ><%= pat . getF ullName ()%></ td > ▁< td ▁class =" subHeader V ertical "> Phone :</ td > ▁< td ><%= pat . getPhone ()%></ td > ▁</ tr > ▁<% ▁} ▁%> ▁</ table > ▁< br ▁/> ▁< br ▁/> ▁< table ▁class =" f Table " ▁align =" center "> ▁< tr > ▁< th ▁col span ="5"> Patient ▁Monitor ing ▁Statistic s </ th > ▁</ tr > ▁< tr ▁class =" subHeader "> ▁< th ▁width ="20%"> Date </ th > ▁< th > Systolic ▁Blood ▁Pressure </ th > ▁< th > Diastolic ▁Blood ▁Pressure </ th > ▁< th > Glucose ▁Level </ th > ▁< th > Reporter </ th > ▁</ tr > ▁<% ▁List < RemoteMonitoring DataBean > ▁ patientStats ▁= ▁list Action . get PatientData By Date ( patientMID , ▁startDate , ▁endDate ); ▁if ( patientStats . is Empty ()){ ▁%> ▁< tr ▁b g color ="# ff 6 666 "> ▁< td >< b > No ▁Information ▁Provided </ b ></ td > ▁< td >< b > No ▁Information ▁Provided </ b ></ td > ▁< td >< b > No ▁Information ▁Provided </ b ></ td > ▁< td >< b > No ▁Information ▁Provided </ b ></ td > ▁< td >< b > No ▁Information ▁Provided </ b ></ td > ▁</ tr > ▁<% ▁} ▁String ▁highlight ▁= ▁""; ▁String ▁ reporterName ▁= ▁""; ▁for ( RemoteMonitoring DataBean ▁stats ▁: ▁ patientStats ){ ▁highlight ▁= ▁""; ▁int ▁ sysBP ▁= ▁stats . get Systolic BloodPressure (); ▁int ▁ diasBP ▁= ▁stats . get Diastolic BloodPressure (); ▁int ▁ gluLvl ▁= ▁stats . getG lucoseLevel (); ▁if ( ( ( sysBP ▁ != ▁-1) ▁&& ▁( sysBP ▁< ▁90 ▁|| ▁ sysBP ▁> ▁14 0 )) ▁|| ▁( ( diasBP ▁ != ▁-1) ▁&& ▁( diasBP ▁< ▁60 ▁|| ▁ diasBP ▁> ▁90 )) ▁|| ▁( ( gluLvl ▁ != ▁-1) ▁&& ▁( gluLvl ▁< ▁70 ▁|| ▁ gluLvl ▁> ▁150 ))) ▁{ ▁highlight ▁= ▁"# ffff 0 0 "; ▁} ▁ reporterName ▁= ▁authDAO . getUserName ( st at s . getReporter MID ()); ▁%> ▁< tr ▁b g color ="<%= h i g h light %>"> ▁< td ><%= st at s . getTime ()%></ td > ▁< td ><%= sysBP ▁== ▁-1?"": sysBP %></ td > ▁< td ><%= diasBP ▁== ▁-1?"": diasBP %></ td > ▁< td ><%= gluLvl ▁== ▁-1?"": gluLvl %></ td > ▁< td ><%= reporterName %></ td > ▁</ tr > ▁<% ▁} ▁%> ▁</ table > ▁< br ▁/> ▁<% ▁} ▁else { ▁%> ▁< form ▁action =" view Add itional Info . jsp " ▁id = date button s ▁ style =" display : ▁inline ; " ▁method =" post "> ▁< input ▁type =" hidden " ▁name =" sortBy " ▁value =" date "></ input > ▁< div ▁align = center > ▁< table ▁class =" f Table " ▁align =" center "> ▁< tr ▁class =" subHeader "> ▁< td > Start ▁Date :</ td > ▁< td > ▁< input ▁name =" startDate " ▁value ="<%= startDate %>" ▁size ="10"> ▁< input ▁type = button ▁value =" Select ▁Date " ▁ onclick =" display DatePicker (' startDate ');"> ▁</ td > ▁< td > End ▁Date :</ td > ▁< td > ▁< input ▁name =" endDate " ▁value ="<%= endDate %>"> ▁< input ▁type = button ▁value =" Select ▁Date " ▁ onclick =" display DatePicker (' endDate ');"> ▁</ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< input ▁type =" submit " ▁name =" submit " ▁value =" Get ▁Records " ▁ onclick =" javascript : sortBy (); "> ▁</ div > ▁</ form > ▁<% ▁} ▁%> ▁< script ▁type =' text / javascript '> ▁function ▁ sortBy () ▁{ ▁document . getElement sBy Name (' sortBy ')[ 0 ] . value ▁= ▁" date "; ▁document . forms [0 ] . submit . click (); ▁} ▁</ script > ▁<%@ include ▁file ="/ f ooter . jsp "%>