▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . util . ArrayList "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . AdverseEventBean "%> ▁<%@ include ▁file ="/ global . jsp " ▁%> ▁< head > ▁< title > Adverse ▁Event ▁Reports ▁ By ▁Month </ title > ▁</ head > ▁< body > ▁<% ▁List < AdverseEventBean > ▁events ▁= ▁( List < AdverseEventBean > ) session . get Attribute (" events "); ▁if ( events ▁ != ▁null ) ▁{ ▁List < AdverseEventBean > ▁thisIdEvents ▁= ▁new ▁ArrayList < AdverseEventBean > (); ▁String ▁[ ] ▁monthName s ▁= ▁{ " Ja n "," F e b "," M ar "," A pr "," May "," June "," July "," Au g "," Sept ", ▁" O ct "," N ov "," De c " }; ▁for ( AdverseEventBean ▁aeBean ▁: ▁events ) ▁{ ▁if ( aeBean . get Code (). equals ( request . getParameter (" id ")) ▁&& ▁( aeBean . get Status () ▁== ▁null ▁|| ▁"" . equals ( aeBean . get Status ())) ) ▁{ ▁thisIdEvents . add ( aeBean ); ▁} ▁} ▁if ( thisIdEvents . size () ▁> ▁0) ▁{ ▁%> ▁< b ><%= thisIdEvents . get (0) . getDrug () ▁+ ▁" (" ▁+ ▁thisIdEvents . get (0) . get Code () ▁%> ) ▁Adverse ▁Events ▁ By ▁Month </ b >< br ▁/>< br ▁/> ▁< table ▁width =" 200 " ▁border ="0" ▁cell padding ="0" ▁cell spac ing ="0" > ▁<% ▁int [ ] ▁height s ▁= ▁new ▁int [ thisIdEvents . size () ] ; ▁String [ ] ▁months ▁= ▁new ▁String [ thisIdEvents . size () ] ; ▁String ▁ currentMonth ▁= ▁thisIdEvents . get (0) . getDate (). substring (0, ▁ 7 ); ▁int ▁heightCount ▁= ▁0; ▁int ▁monthCount ▁= ▁0; ▁int ▁maxHeight ▁= ▁1; ▁for ( AdverseEventBean ▁aeBean ▁: ▁thisIdEvents ) ▁{ ▁if (! aeBean . getDate (). substring (0, ▁7) . equals ( currentMonth )) ▁{ ▁height s [ monthCount ] ▁= ▁heightCount ; ▁if ( height Count ▁> ▁maxHeight ) ▁maxHeight ▁= ▁heightCount ; ▁heightCount ▁= ▁0; ▁ currentMonth ▁= ▁aeBean . getDate (). substring (0, ▁ 7 ); ▁monthCount ++; ▁} ▁String ▁date ▁= ▁aeBean . getDate (). substring (0, ▁ 7 ); ▁int ▁month ▁= ▁Integer . parse Int ( date . substring ( 5 )); ▁String ▁monthName ▁= ▁monthName s [ month ▁- ▁1 ] ; ▁months [ monthCount ] ▁= ▁monthName ▁+ ▁" ▁" ▁+ ▁date . substring (0, 4 ); ▁heightCount ++; ▁} ▁height s [ monthCount ] ▁= ▁heightCount ; ▁if ( height Count ▁> ▁maxHeight ) ▁maxHeight ▁= ▁heightCount ; ▁monthCount ++; ▁String ▁ currentColor ▁= ▁ "#000000" ; ▁for ( int ▁i ▁= ▁0; ▁i ▁< ▁maxHeight ; ▁i ++) ▁{ ▁%> ▁< tr ▁height ="10"> ▁< td ▁width =" 18 " ▁b g color ="# FFFFFF " ▁ style =" text - align : ▁right ;"><%= max Height ▁- ▁i ▁%></ td > ▁< td ▁width ="2"> ▁< table ▁border ="0" ▁cell padding ="0" ▁cell spac ing ="0" > ▁< tr >< td ▁width ="2" ▁ style =" border - bottom : ▁1 px ▁solid ▁# AAAAAA ; ▁border - right : ▁2 px ▁solid ▁# AAAAAA "> & nb sp ; </ td ></ tr > ▁< tr >< td ▁width ="2" ▁ style =" border - top : ▁1 px ▁solid ▁# AAAAAA ; ▁border - right : ▁2 px ▁solid ▁# AAAAAA "> & nb sp ; </ td ></ tr > ▁</ table > ▁</ td > ▁<% ▁for ( int ▁j ▁= ▁0; ▁j ▁< ▁monthCount ; ▁j ++) ▁{ ▁if ( height s [ j ] ▁>= ▁maxHeight ▁- ▁i ) ▁{ ▁%> ▁< td ▁width ="15 " ▁b g color ="<%= currentColor ▁%> "></ td > ▁<% ▁} ▁else ▁{ ▁%> ▁< td ▁width ="15 " ▁b g color ="# FFFFFF "></ td > ▁<% ▁} ▁%> ▁< td ▁width ="5"> </ td > ▁<% ▁if ( currentColor . equals ( "#000000" )) ▁ currentColor ▁= ▁"# CC 0000 "; ▁else ▁ currentColor ▁= ▁ "#000000" ; ▁} ▁%> ▁</ tr > ▁<% ▁} ▁%> ▁< tr ▁height ="20" >< td ▁width =" 18 "></ td >< td ▁width ="2" ▁ style =" border - top : ▁2 px ▁solid ▁# AAAAAA ;"> & nb sp ; </ td > ▁<% ▁for ( int ▁m ▁= ▁0; ▁m ▁< ▁monthCount ; ▁m ++) ▁{ ▁%> ▁< td ▁ style =" border - top : ▁2 px ▁solid ▁# AAAAAA "><%= months [ m ] ▁%></ td > ▁< td ▁ style =" border - top : ▁2 px ▁solid ▁# AAAAAA "> & nb sp ; </ td > ▁<% ▁} ▁%> ▁</ tr > ▁<% ▁} ▁%> ▁</ table > ▁<% ▁} ▁%> ▁</ body >