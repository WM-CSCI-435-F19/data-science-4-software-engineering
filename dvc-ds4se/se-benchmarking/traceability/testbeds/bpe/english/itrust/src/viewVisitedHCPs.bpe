▁<%@ tag lib ▁uri ="/ W EB - INF / tags . tld " ▁prefix =" itrust " ▁%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp " ▁%> ▁<%@ page ▁import =" java . util . List "%> ▁<%@ page ▁import =" java . util . ArrayList "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . HCPVisitBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . OfficeVisitBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . V iewVisitedHCPs Action "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PersonnelBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . mysql . PatientDAO "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . iTrustException "%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁My ▁Provider s "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁< script ▁type =" text / javascript "> ▁function ▁ removeHCP ( HCPID , form ID ) ▁{ ▁document . getElementById (" removeID "). value ▁= ▁HCPID ; ▁document . getElementById ( form ID ) . submit (); ▁} ▁</ script > ▁<% ▁PatientBean ▁patient ▁= ▁new ▁PatientDAO ( prodDAO ) . getPatient ( loggedInMID . longValue ()); ▁String [ ] ▁ designateHCP s ▁= ▁request . getParameter Value s (" doctor "); ▁String ▁ filterName ▁= ▁request . getParameter (" filter _ name "); ▁String ▁filter Specialty ▁= ▁request . getParameter (" filter _ specialty "); ▁String ▁filter Zip ▁= ▁request . getParameter (" filter _ zip "); ▁String ▁ removeID ▁= ▁request . getParameter (" removeID "); ▁boolean ▁filtered ▁= ▁false ; ▁ViewVisitedHCPs Action ▁action ▁= ▁new ▁ViewVisitedHCPs Action ( DAOFactory . getPr oductionInstance (), loggedInMID . longValue ()); ▁List < HCPVisitBean > ▁hcp Visit s ▁= ▁action . getVisit ed HCP s (); ▁String ▁confirm ▁= ▁""; ▁try ▁{ ▁if ▁( removeID ▁ != ▁null ▁&& ▁! removeID . equals ("")) ▁{ ▁confirm ▁= ▁action . undeclare HCP ( removeID ); ▁} ▁else ▁if ▁( designateHCP s ▁ != ▁null ▁&& ▁! designateHCP s [0 ] . equals ("")) ▁{ ▁for ▁( String ▁ designateHCP ▁: ▁ designateHCP s ) ▁{ ▁confirm ▁= ▁action . d eclareHCP ( designateHCP ); ▁} ▁} ▁} ▁catch ▁( iTrustException ▁ ie ) ▁{ ▁%> ▁< span ▁><%= ie . getMessage ()%></ span > ▁<% ▁} ▁if (! " " . equals ( confirm ) ){%> < span ><%= confirm %></ span ><% } ▁List < PersonnelBean > ▁personnel ▁= ▁null ; ▁if ▁( filterName ▁ != ▁null ▁&& ▁! filterName . equals ("")) ▁{ ▁filtered ▁= ▁true ; ▁personnel ▁= ▁action . filter HCP List ( filterName , ▁filter Specialty , ▁filter Zip ); ▁} ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁<% ▁if ▁(! filtered ) ▁{ ▁%> ▁< h 3> Pro v i der ▁list ▁for ▁<%= patient . getF ullName ()%></ h 3> ▁< br ▁/> ▁< form ▁name =" mainForm " ▁id =" mainForm " ▁action =" v iewVisitedHCPs . jsp " ▁method =" post " ▁on Submit =" return ▁false ; " ▁ target =" _ top "> ▁< input ▁type =" hidden " ▁id =" removeID " ▁name =" removeID " ▁value =" " ▁/> ▁< table ▁id =" hcp _ table " ▁class =" f Table " ▁ style =" text - align : ▁center ;"> ▁< tr > ▁< th > HCP ▁Name </ th > ▁< th > Specialty </ th > ▁< th > Address </ th > ▁< th > Date ▁of ▁Office ▁Visit </ th > ▁< th > Designated ▁HCP ?</ th > ▁</ tr > ▁<% ▁int ▁i ▁= ▁0; ▁for ▁( HCPVisitBean ▁ vb : ▁hcp Visit s ) ▁{ ▁%> ▁< tr > ▁< td ><%= vb . get HCPName ()%></ td > ▁< td ><%= vb . get HCPSpecialty ()%></ td > ▁< td ><%= vb . get HCPAddr ()%></ td > ▁< td ><%= vb . get OVDate ()%></ td > ▁< td > ▁< input ▁name =" doctor " ▁value ="<%= vb . get HCPName ()%>" ▁type =" checkbox " <%= vb . is Designated ( )?" checked =\" checked \"":"" %> ▁on Click =" if ( document . getElement sBy Name (' doctor ')[ <%= i %> ] . checked ) ▁{ this . form . submit (); } ▁else ▁{ removeHCP ('<%= vb . get HCPName ()%>' , ▁' mainForm '); } "/> ▁</ td > ▁</ tr > ▁<% ▁i ++; ▁} ▁%> ▁< tr > ▁< td ▁col span ="5" ▁ style =" color : ▁# CC 3 3 3 3 ; ▁text - align : ▁right ; ▁ font - weight : ▁bold ; ▁ font - size : ▁12 px ;"> ▁Select ▁ checkbox ▁to ▁update ▁designated ▁HCP ▁</ td > ▁</ tr > ▁</ table > ▁</ form > ▁<% ▁} ▁else ▁{ ▁%> ▁< form ▁name =" filterForm " ▁id =" filterForm " ▁action =" v iewVisitedHCPs . jsp " ▁method =" post " ▁on Submit =" return ▁false ; " ▁ target =" _ top "> ▁< table ▁id =" filter _ hcp _ table " ▁class =" f Table "> ▁< tr > ▁< th > HCP ▁Name </ th > ▁< th > Specialty </ th > ▁< th > Address </ th > ▁< th > Designated ▁HCP ?</ th > ▁</ tr > ▁<% ▁List < PersonnelBean > ▁added ▁= ▁null ; ▁if ▁( null ▁ != ▁personnel ) ▁{ ▁int ▁i ▁= ▁0; ▁for ▁( PersonnelBean ▁ele : ▁personnel ) ▁{ ▁%> ▁< tr > ▁< td ><%= ele . getF ullName () ▁%></ td > ▁< td ><%= ele . get Specialty () ▁== ▁null ?" none " : ele . get Specialty ()%></ td > ▁< td ><%= new ▁String ( ele . getStreetAddress 1() ▁+" ▁"+ ▁ele . getStreetAddress 2() ▁+" ▁"+ ▁ele . get City () ▁+ ", ▁"+ ▁ele . get State () ▁+" ▁"+ ▁ele . getZip ()) ▁%></ td > ▁< td > ▁< input ▁name =" doctor " ▁value ="<%= ele . getF ullName ()%>" ▁type =" checkbox " <%= action . checkDeclared ( ele . get MID () )?" checked =\" checked \"":"" %> ▁on Click =" if ( document . getElement sBy Name (' doctor ')[ <%= i %> ] . checked ) ▁{ this . form . submit (); } ▁else ▁{ removeHCP ('<%= ele . getF ullName ()%> ',' filterForm '); } "/> ▁</ td > ▁</ tr > ▁<% ▁i ++; ▁} ▁} ▁%> ▁< tr > ▁< td ▁col span ="5" ▁ style =" color : ▁# CC 3 3 3 3 ; ▁text - align : ▁right ; ▁ font - weight : ▁bold ; ▁ font - size : ▁12 px ;"> ▁Select ▁ checkbox ▁to ▁update ▁designated ▁HCP ▁</ td > ▁</ tr > ▁</ table > ▁< input ▁type =" hidden " ▁id =" removeID " ▁name =" removeID " ▁value =" " ▁> ▁</ form > ▁<% ▁} ▁%> ▁</ div > ▁< br ▁/>< br ▁/> ▁< form ▁id =" searchFor m " ▁action =" v iewVisitedHCPs . jsp " ▁method =" post "> ▁< div ▁align = center > ▁< table ▁class =" f Table " ▁ style =" border : ▁none ; " ▁border =0 > ▁< tr > ▁< th ▁col span =2> Search ▁HCPs </ th > ▁</ tr > ▁< tr ▁ style =" text - align : ▁left ;"> ▁< td ▁class =" subHeader V ertical "> Last ▁Name :</ td > ▁< td ▁>< input ▁type =" text " ▁name =" filter _ name " ▁size =" 30 " ▁maxlength =" 255 " ▁ ></ td > ▁</ tr > ▁< tr ▁ style =" text - align : ▁left ;"> ▁< td ▁class =" subHeader V ertical "> Specialty :</ td > ▁< td ▁>< input ▁type =" text " ▁name =" filter _ specialty " ▁size =" 30 " ▁maxlength =" 255 " ▁ ></ td > ▁</ tr > ▁< tr ▁ style =" text - align : ▁left ;"> ▁< td ▁class =" subHeader V ertical "> Zip ▁Code : ▁</ td > ▁< td >< input ▁type =" text " ▁name =" filter _ zip " ▁size ="10" ▁maxlength ="10"> </ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< input ▁type =" submit " ▁name =" update _ filter " ▁value =" Search "> ▁</ div > ▁</ form > ▁<%@ include ▁file ="/ f ooter . jsp "%>