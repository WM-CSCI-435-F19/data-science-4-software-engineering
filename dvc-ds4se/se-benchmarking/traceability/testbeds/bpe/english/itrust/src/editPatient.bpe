▁<%@ tag lib ▁prefix =" itrust " ▁uri ="/ W EB - INF / tags . tld "%> ▁<%@ page ▁error Page ="/ auth / exception Handler . jsp "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . dao . DAOFactory "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . PatientBean "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . action . E ditPatientAction "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . BeanBuilder "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . enums . Ethnicity "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . enums . BloodType "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . exception . FormValidat ionException "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . enums . Gender "%> ▁<%@ page ▁import =" edu . nc su . cs c . itrust . beans . DiagnosisBean "%> ▁<%@ include ▁file ="/ global . jsp "%> ▁<% ▁pageTitle ▁= ▁" iTrust ▁- ▁Edit ▁Patient "; ▁%> ▁<%@ include ▁file ="/ header . jsp "%> ▁<% ▁/* ▁Require ▁a ▁Patient ▁ID ▁first ▁*/ ▁String ▁pidString ▁= ▁( String ) ▁session . get Attribute (" pid "); ▁if ▁( pidString ▁== ▁null ▁|| ▁1 ▁> ▁pidString . length ()) ▁{ ▁pidString ▁= ▁( String ) ▁session . get Attribute (" edit Pid "); ▁if ▁( pidString ▁== ▁null ▁|| ▁1 ▁> ▁pidString . length ()) ▁{ ▁response . send Redirect ("/ iTrust / auth / getPatientID . jsp ? forward = hcp - uap / editPatient . jsp "); ▁return ; ▁} ▁} ▁else ▁{ ▁session . remove Attribute (" pid "); ▁session . set Attribute (" edit Pid ", ▁pidString ); ▁} ▁/* ▁If ▁the ▁patient ▁id ▁does n ' t ▁check ▁out , ▁then ▁kick ▁' em ▁out ▁to ▁the ▁exception ▁handler ▁*/ ▁E ditPatientAction ▁action ▁= ▁new ▁E ditPatientAction ( prodDAO , ▁loggedInMID . longValue (), ▁pidString ); ▁/* ▁ Now ▁take ▁care ▁of ▁updating ▁information ▁*/ ▁boolean ▁ formIsFilled ▁= ▁request . getParameter (" formIsFilled ") ▁ != ▁null ▁&& ▁request . getParameter (" formIsFilled "). equals (" true "); ▁PatientBean ▁p ; ▁if ▁( formIsFilled ) ▁{ ▁p ▁= ▁new ▁ BeanBuilder < PatientBean > (). build ( request ▁ . getParameterMap (), ▁new ▁PatientBean ()); ▁try ▁{ ▁action . update Information ( p ); ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< span ▁class =" iTrustMessage "> Information ▁Successfully ▁Updated </ span > ▁</ div > ▁< br ▁/> ▁<% ▁} ▁catch ▁( FormValidat ionException ▁e ) ▁{ ▁%> ▁< br ▁/> ▁< div ▁align = center > ▁< span ▁class =" iTrust Error "><%= e . getMessage () ▁%></ span > ▁</ div > ▁< br ▁/> ▁<% ▁} ▁} ▁else ▁{ ▁p ▁= ▁action . getPatient (); ▁} ▁%> ▁< form ▁action =" editPatient . jsp " ▁method =" post ">< input ▁type =" hidden " ▁name =" formIsFilled " ▁value =" true "> ▁< br ▁/> ▁< table ▁cell spac ing =0 ▁align = center ▁cell padding =0 > ▁< tr > ▁< td ▁v align = top > ▁< table ▁class =" f Table " ▁align = center ▁ style =" width : ▁350 px ;"> ▁< tr > ▁< th ▁col span =2> Patient ▁Information </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> First ▁Name :</ td > ▁< td >< input ▁name =" firstName " ▁value ="<%= p . get FirstName ()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Last ▁Name :</ td > ▁< td >< input ▁name =" lastName " ▁value ="<%= p . get LastName ()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Email :</ td > ▁< td >< input ▁name =" email " ▁value ="<%= p . getEmail ()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Address :</ td > ▁< td >< input ▁name =" streetAddress 1" ▁value ="<%= p . getStreetAddress 1()%>" ▁type =" text ">< br ▁/> ▁< input ▁name =" streetAddress 2" ▁value ="<%= p . getStreetAddress 2()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> City :</ td > ▁< td >< input ▁name =" city " ▁value ="<%= p . get City ()%>" ▁type =" text "> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> State :</ td > ▁< td >< itrust : state ▁name =" state " ▁value ="<%= p . get State ()%>" ▁/></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Zip :</ td > ▁< td >< input ▁name =" zip 1" ▁value ="<%= p . getZip 1()%>" ▁maxlength ="5" ▁type =" text " ▁size ="5"> ▁- ▁< input ▁name =" zip 2" ▁value ="<%= p . getZip 2()%>" ▁maxlength ="4" ▁type =" text " ▁size ="4"> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Phone :</ td > ▁< td >< input ▁name =" phone 1" ▁value ="<%= p . getPhone 1()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" phone 2" ▁value ="<%= p . getPhone 2()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" phone 3 " ▁value ="<%= p . getPhone 3 ()%>" ▁type =" text " ▁size ="4" ▁maxlength ="4"> </ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Mother ▁MIDs :</ td > ▁< td >< input ▁name =" m other MID " ▁value ="<%= p . get MotherMID ()%>" ▁maxlength ="10" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Father ▁MID :</ td > ▁< td >< input ▁name =" f ather MID " ▁value ="<%= p . get FatherMID ()%>" ▁maxlength ="10" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Credit ▁ Card ▁Type :</ td > ▁< td >< select ▁name =" creditCardType "> ▁< option ▁value =""> Select :</ option > ▁< option ▁value =" MASTERCARD " ▁<%= ▁p . get CreditCardType (). equals (" MASTERCARD ") ▁? ▁" selected " ▁: ▁"" ▁%> > M a s ter ca rd </ option > ▁< option ▁value =" VISA " ▁<%= ▁p . get CreditCardType (). equals (" VISA ") ▁? ▁" selected " ▁: ▁"" ▁%> > V is a </ option > ▁< option ▁value =" DISCOVER " ▁<%= ▁p . get CreditCardType (). equals (" DISCOVER ") ▁? ▁" selected " ▁: ▁"" ▁%> > Di sc over </ option > ▁< option ▁value =" AMEX " ▁<%= ▁p . get CreditCardType (). equals (" AMEX ") ▁? ▁" selected " ▁: ▁"" ▁%> > American ▁E xpress </ option > ▁</ select > ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Credit ▁ Card ▁Number :</ td > ▁< td >< input ▁name =" creditCardNumber " ▁value ="<%= p . get CreditCardNumber ()%>" ▁maxlength =" 19 " ▁type =" text "></ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< table ▁class =" f Table " ▁align = center ▁ style =" width : ▁350 px ;"> ▁< tr > ▁< th ▁col span =2> I nsurance ▁Information </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Name :</ td > ▁< td >< input ▁name =" icName " ▁value ="<%= p . getIc Name ()%>" ▁type =" text "> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Address :</ td > ▁< td >< input ▁name =" icAddress 1" ▁value ="<%= p . getIcAddress 1()%>" ▁type =" text ">< br ▁/> ▁< input ▁name =" icAddress 2" ▁value ="<%= p . getIcAddress 2()%>" ▁type =" text "> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> City :</ td > ▁< td >< input ▁name =" icCity " ▁value ="<%= p . getIc City ()%>" ▁type =" text "> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> State :</ td > ▁< td >< itrust : state ▁name =" icState " ▁value ="<%= p . getIc State ()%>" ▁/> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Zip :</ td > ▁< td >< input ▁name =" icZip 1" ▁value ="<%= p . getIcZip 1()%>" ▁maxlength ="5" ▁type =" text " ▁size ="5"> ▁- ▁< input ▁name =" icZip 2" ▁value ="<%= p . getIcZip 2()%>" ▁maxlength ="4" ▁type =" text " ▁size ="4"> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Phone :</ td > ▁< td >< input ▁name =" icPhone 1" ▁value ="<%= p . getIcPhone 1()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" icPhone 2" ▁value ="<%= p . getIcPhone 2()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" icPhone 3 " ▁value ="<%= p . getIcPhone 3 ()%>" ▁type =" text " ▁size ="4" ▁maxlength ="4"> ▁</ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> I nsurance ▁ID :</ td > ▁< td >< input ▁name =" icID " ▁value ="<%= p . getIc ID ()%>" ▁type =" text "> ▁</ td > ▁</ tr > ▁</ table > ▁</ td > ▁< td ▁width ="15 px "> & nb sp ; </ td > ▁< td ▁v align = top > ▁< table ▁class =" f Table " ▁align = center ▁ style =" width : ▁350 px ;"> ▁< tr > ▁< th ▁col span =2> Emergency ▁Contact </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Name :</ td > ▁< td >< input ▁name =" emergencyName " ▁value ="<%= p . getEmergency Name ()%>" ▁type =" text "></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Phone :</ td > ▁< td >< input ▁name =" emergencyPhone 1" ▁value ="<%= p . get EmergencyPhone 1()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" emergencyPhone 2" ▁value ="<%= p . get EmergencyPhone 2()%>" ▁type =" text " ▁size ="3" ▁maxlength ="3"> ▁- ▁< input ▁name =" emergencyPhone 3 " ▁value ="<%= p . get EmergencyPhone 3 ()%>" ▁type =" text " ▁size ="4" ▁maxlength ="4"> </ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< table ▁class =" f Table " ▁align = center ▁ style =" width : ▁350 px ;"> ▁< tr > ▁< th ▁col span =2> Health ▁Information </ th > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Ethnicity :</ td > ▁< td >< select ▁name =" ethnicity Str "> ▁<% ▁String ▁selected ▁= ▁""; ▁for ▁( Ethnicity ▁e th ▁: ▁Ethnicity . values ()) ▁{ ▁selected ▁= ▁( e th . equals ( p . get Ethnicity ())) ▁? ▁" selected = selected " ▁: ▁""; ▁%> ▁< option ▁value ="<%= e th . getName ()%>" ▁<%= selected %>><%= e th . getName ()%></ option > ▁<% ▁} ▁%> ▁</ select ></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Blood ▁Type :</ td > ▁< td >< select ▁name =" bloodTypeStr "> ▁<% ▁for ▁( BloodType ▁b t ▁: ▁BloodType . values ()) ▁{ ▁selected ▁= ▁( b t . equals ( p . get BloodType ())) ▁? ▁" selected = selected " ▁: ▁""; ▁%> ▁< option ▁value ="<%= b t . getName ()%>" ▁<%= selected %>><%= b t . getName ()%></ option > ▁<% ▁} ▁%> ▁</ select > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Gender :</ td > ▁< td >< select ▁name =" gender Str "> ▁<% ▁for ▁( Gender ▁ g ▁: ▁Gender . values ()) ▁{ ▁selected ▁= ▁( g . equals ( p . get Gender ())) ▁? ▁" selected = selected " ▁: ▁""; ▁%> ▁< option ▁value ="<%= g . getName ()%>" ▁<%= selected %>><%= g . getName ()%></ option > ▁<% ▁} ▁%> ▁</ select ></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Date ▁ Of ▁ Birth :</ td > ▁< td >< input ▁type = text ▁name =" dateOfBirthStr " ▁maxlength ="10" ▁size ="10" ▁value ="<%= p . getDateOfBirth Str ()%>"> ▁< input ▁type = button ▁value =" Select ▁Date " ▁ onclick =" display DatePicker (' dateOfBirthStr ');"> </ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Date ▁ Of ▁Death :</ td > ▁< td >< input ▁type = text ▁name =" dateOfDeathStr " ▁maxlength ="10" ▁size ="10" ▁value ="<%= p . getDateOfDeath Str ()%>"> ▁< input ▁type = button ▁value =" Select ▁Date " ▁ onclick =" display DatePicker (' dateOfDeathStr ');"> </ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Cause ▁of ▁Death :</ td > ▁< td >< select ▁name =" causeOfDeath " ▁ style =" font - size : ▁10 "> ▁< option ▁value =""> -- ▁None ▁Select ed ▁ --</ option > ▁<% ▁for ▁( DiagnosisBean ▁diag ▁: ▁prodDAO . get ICDCodesDAO (). getAll ICDCodes ()){ ▁String ▁select ▁= ▁""; ▁if ▁( diag . getICDCode (). equals ( p . get CauseOfDeath ())) ▁select ▁= ▁" selected =\" selected \"" ; ▁%> ▁< option ▁<%= select %> ▁value ="<%= diag . getICDCode ()%>"><%= diag . getICDCode () ▁%> ▁- ▁< jsp : e xpress ion > diag . get Description () </ jsp : e xpress ion ></ option > ▁<% ▁} ▁%> ▁</ select ></ td > ▁</ tr > ▁< tr > ▁< td ▁class =" subHeader V ertical "> Topical ▁ Notes :</ td > ▁< td >< textarea ▁name =" top ical Notes "><%= p . get TopicalNotes ()%></ textarea > ▁</ td > ▁</ tr > ▁</ table > ▁</ td > ▁</ tr > ▁</ table > ▁< br ▁/> ▁< div ▁align = center > ▁< input ▁type =" submit " ▁name =" action " ▁ style =" font - size : ▁16 pt ; ▁ font - weight : ▁bold ; " ▁value =" Edit ▁Patient ▁Record ">< br ▁/>< br ▁/> ▁< span ▁ style =" font - size : ▁14 px ;"> ▁Note : ▁in ▁order ▁to ▁set ▁the ▁password ▁for ▁this ▁user , ▁use ▁the ▁" Reset ▁Password " ▁link ▁at ▁the ▁login ▁page . ▁</ span > ▁</ div > ▁</ form > ▁< br ▁/> ▁< br ▁/> ▁< itrust : patient Nav ▁thisTitle =" Demographics " ▁/> ▁<%@ include ▁file ="/ f ooter . jsp "%>