▁p ackage ▁interfacce ; ▁import ▁java . awt .* ; ▁import ▁java . awt . event .* ; ▁import ▁common . utility .* ; ▁import ▁common . def .* ; ▁import ▁java . util . Date ; ▁import ▁modul i .* ; ▁p ublic ▁class ▁Ricerca Telefonate ▁ext ends ▁Frame ▁{ ▁Prenotazione ▁prenotazione ; ▁// Dichiar azioni ▁di ▁variabili ▁Panel ▁panel 1, ▁panel 2, ▁panel 3; ▁Label ▁etichetta 1, ▁label 1, ▁label 3; ▁List ▁lista ; ▁Button ▁Annulla , ▁Cerca ; ▁TextField ▁stanza ; ▁GridBagLayout ▁gridbag ▁= ▁new ▁GridBagLayout (); ▁Frame ▁padre ▁= ▁new ▁Frame (); ▁Frame ▁figlio ; ▁Lista Telefonate ▁L ; ▁Telefonata ▁tel ; ▁int ▁tot _ scatti ▁= ▁0; ▁p ublic ▁Ricerca Telefonate ( Frame ▁p ) ▁{ ▁super (" Ricerca ▁delle ▁telefonate "); ▁padre ▁= ▁p ; ▁padre . setEnabled ( false ); ▁setupPanel s (); ▁init (); ▁pack (); ▁ setVisible ( true ); ▁} ▁void ▁setupPanel s () ▁{ ▁this . setFont ( Configurazione Sistema . font _ base ); ▁// Cre o ▁due ▁pulsanti ▁Annulla ▁= ▁new ▁Button (" ▁Fine ▁"); ▁Cerca ▁= ▁new ▁Button (" ▁Cerca ▁"); ▁// Cre o ▁le ▁etichette ▁etichetta 1 ▁= ▁new ▁Label ▁ (" Inseri re ▁la ▁stanza ▁addebita ta ▁"); ▁etichetta 1. setFont ( Configurazione Sistema . font _ titolo ); ▁label 1 ▁= ▁new ▁Label (" Numero ▁Stanza "); ▁label 3 ▁= ▁new ▁Label (" Risultat o ▁della ▁ricerca "); ▁label 3. setFont ( Configurazione Sistema . font _ titolo ); ▁// Cre o ▁i ▁TextField ▁e ▁ne ▁ rendo ▁alcuni ▁non ▁edit abili ▁stanza ▁= ▁new ▁TextField ("", ▁4 ); ▁// Cre o ▁il ▁pannello ▁in ▁alto ▁per ▁inserimento ▁dei ▁dati ▁del ▁cliente ▁panel 1 ▁= ▁new ▁Panel (); ▁panel 1. setLayout ( gridbag ); ▁ Utils . constrain ( panel 1, ▁etichetta 1, ▁0, ▁0, ▁2, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁ Utils . constrain ( panel 1, ▁label 1, ▁0, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁ Utils . constrain ( panel 1, ▁stanza , ▁1, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁// Cre o ▁il ▁pannello ▁in ▁basso ▁con ▁due ▁pulsanti ▁panel 2 ▁= ▁new ▁Panel (); ▁panel 2. setLayout ( gridbag ); ▁ Utils . constrain ( panel 2, ▁Annulla , ▁0, ▁0, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . CENTER , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 2, ▁Cerca , ▁1, ▁0, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . CENTER , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁// Cre o ▁il ▁pannello ▁con ▁la ▁lista ▁dei ▁risultati ▁della ▁ricerca ▁lista ▁= ▁new ▁List (10, false ); ▁lista . setFont ( Configurazione Sistema . font _ allineato ); ▁panel 3 ▁= ▁new ▁Panel (); ▁panel 3. setLayout ( gridbag ); ▁ Utils . constrain ( panel 3, ▁label 3, ▁0, ▁0, ▁2, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁ Utils . constrain ( panel 3, ▁lista , ▁0, ▁1, ▁ 4, ▁3, ▁Grid BagConstraints . BOTH , ▁Grid BagConstraints . CENTER , ▁3. 0, ▁3. 0, ▁0, ▁0, ▁0, ▁0) ; ▁// Attac co ▁i ▁pannelli ▁al ▁frame ▁this . setLayout ( gridbag ); ▁ Utils . constrain ( this , ▁panel 1, ▁0, ▁1, ▁ 4, ▁2, ▁Grid BagConstraints . HORIZONTAL , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( this , ▁panel 2, ▁0, ▁14 , ▁ 4, ▁1, ▁Grid BagConstraints . HORIZONTAL , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( this , ▁panel 3, ▁0, ▁ 15, ▁ 4, ▁1, ▁Grid BagConstraints . HORIZONTAL , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁panel 3. setVisible ( false ); ▁pack (); ▁} ▁p ublic ▁void ▁init () ▁{ ▁lista . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁tel ▁= ▁L . get Telefonata ( ( lista . getSelectedIndex es ()) [0] +1 ); ▁startVedi Telefonata ( tel ); ▁} ▁} ); ▁stanza . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁if ▁( no Error s ()) ▁crea Lista (); ▁} ▁} ); ▁Cerca . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁if ▁( no Error s ()) ▁crea Lista (); ▁} ▁} ); ▁Annulla . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁dispose (); ▁padre . setEnabled ( true ); ▁} ▁} ); ▁} ▁void ▁startVedi Telefonata ( Telefonata ▁tel ) ▁{ ▁figlio ▁= ▁new ▁Maschera Telefonate ( this , ▁tel , ▁tot _ scatti ); ▁} ▁p ublic ▁void ▁crea Lista () ▁{ ▁Frame ▁msg ; ▁tot _ scatti ▁= ▁0; ▁L ▁= ▁( Principale . db ) . found Telefonate ( stanza . getText ()); ▁if ▁( L ▁ != ▁null ) ▁{ ▁if ▁(! L . isEmpty ()) ▁{ ▁if ▁( lista . getItemCount () ▁ > ▁0) ▁lista . removeAll (); ▁panel 3. setVisible ( true ); ▁pack (); ▁for ( int ▁i ▁= ▁1; ▁i <= L . length (); ▁i ++) ▁{ ▁lista . addItem ( L . get Telefonata ( i ) . toString ()); ▁tot _ scatti ▁+= ▁L . get Telefonata ( i ) . getNum Scatti (); ▁} ▁} ▁else ▁msg ▁= ▁new ▁Avviso Dialog ( this , ▁" ▁Nessun a ▁telefonata ▁addebita ta ▁"); ▁} ▁else ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" P roblemi ▁con ▁il ▁DataBase !" ); ▁} ▁boolean ▁no Error s () ▁{ ▁Frame ▁msg ; ▁// Disponibilita ▁disp ▁= ▁new ▁Disponibilita (); ▁if ▁( ( stanza . getText () . equals ("")) ▁) ▁{ ▁msg ▁= ▁new ▁Avviso Dialog ( this ," Inseri re ▁il ▁numero ▁della ▁stanza "); ▁return ▁false ; ▁} ▁else ▁if ( ▁( Principale . db ) . read Stanza ( stanza . getText ()) ▁== ▁null ▁) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this ," La ▁stanza ▁inserita ▁e ' ▁inesistente !" ); ▁return ▁false ; ▁} ▁return ▁true ; ▁} ▁}