▁p ackage ▁interfacce ; ▁import ▁java . awt .* ; ▁import ▁java . awt . event .* ; ▁import ▁common . utility .* ; ▁import ▁common . def .* ; ▁import ▁modul i .* ; ▁p ublic ▁class ▁Maschera Commissioni ▁ext ends ▁Frame ▁{ ▁TextField ▁num _ stanza , ▁nome _ agenzia , ▁inizio _ comm , ▁fine _ comm , ▁scadenza _ comm ▁ , num _ tel _ agenzia ; ▁Label ▁etichetta 3, ▁etich 1, ▁etich 2, ▁etich 3, ▁etich 4, ▁etich 5, ▁etich 6, ▁etich 7; ▁Panel ▁panel 1, ▁panel 2, ▁panel 3, ▁panel 4, ▁panel 5; ▁List ▁lista ; ▁Button ▁Annulla , ▁Azione , ▁Cerca ; ▁GridBagLayout ▁gridbag ▁= ▁new ▁GridBagLayout (); ▁SubCommissioni ▁padre ▁= ▁new ▁SubCommissioni (); ▁Lista Commissionamenti ▁L ; ▁int ▁caller ; ▁p ublic ▁Maschera Commissioni ( String ▁data 1, ▁String ▁data 2, ▁String ▁title , ▁String ▁caption , ▁int ▁c ) ▁{ ▁super ( title ); ▁caller ▁= ▁c ; ▁setupPanel s ( data 1, ▁data 2, ▁caption ); ▁inizializza (); ▁pack (); ▁} ▁void ▁setupPanel s ( String ▁data 1, ▁String ▁data 2, ▁String ▁caption ) ▁{ ▁this . setFont ( Configurazione Sistema . font _ base ); ▁// Cre o ▁le ▁etichette ▁etichetta 3 ▁= ▁new ▁Label (" Inserimento ▁dati ▁della ▁commissione "); ▁etichetta 3. setFont ( Configurazione Sistema . font _ titolo ); ▁etich 1 ▁= ▁new ▁Label (" Nome ▁ Agenzia "); ▁etich 2 ▁= ▁new ▁Label (" Numero ▁Stanza "); ▁etich 3 ▁= ▁new ▁Label (" Data ▁inizio ▁ Commissione "); ▁etich 4 ▁= ▁new ▁Label (" Data ▁fine ▁ Commissione "); ▁etich 5 ▁= ▁new ▁Label (" Data ▁scadenza ▁ Commissione "); ▁etich 6 ▁= ▁new ▁Label (" Numero ▁telefonico ▁ Agenzia "); ▁etich 7 ▁= ▁new ▁Label (" Risultat o ▁della ▁ricerca "); ▁etich 7. setFont ( Configurazione Sistema . font _ titolo ); ▁// Cre o ▁i ▁TextField ▁e ▁ne ▁ rendo ▁alcuni ▁non ▁edit abili ▁nome _ agenzia ▁= ▁new ▁TextField ("", 20 ); ▁num _ stanza ▁= ▁new ▁TextField ("",4 ); ▁inizio _ comm ▁= ▁new ▁TextField ("", 12 ); ▁fine _ comm ▁= ▁new ▁TextField ("", 12 ); ▁scadenza _ comm ▁= ▁new ▁TextField ("", 12 ); ▁num _ tel _ agenzia ▁= ▁new ▁TextField ("", 16 ); ▁// Cre o ▁i ▁pulsanti ▁Annulla ▁= ▁new ▁Button (" ▁Fine ▁"); ▁Azione ▁= ▁new ▁Button ( caption ); ▁Cerca ▁= ▁new ▁Button (" ▁Cerca ▁"); ▁// Cre o ▁il ▁pannello ▁panel 3 ▁= ▁new ▁Panel (); ▁panel 3. setLayout ( gridbag ); ▁ Utils . constrain ( panel 3, ▁etichetta 3, ▁0, ▁0, ▁3, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁ Utils . constrain ( panel 3, ▁etich 1, ▁0, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, nome _ agenzia ▁ , ▁1, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, ▁etich 2, ▁2, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, num _ stanza , ▁3, ▁1, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, ▁etich 3, ▁0, ▁2, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, inizio _ comm ▁ , ▁1, ▁2, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, ▁etich 4, ▁2, ▁2, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, fine _ comm ▁ , ▁3, ▁2, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, ▁etich 5, ▁0, ▁3, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, scadenza _ comm ▁ , ▁1, ▁3, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, ▁etich 6, ▁0, ▁ 4, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( panel 3, num _ tel _ agenzia ▁ , ▁1, ▁ 4, ▁ 4, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . NORTH WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁panel 4 ▁= ▁new ▁Panel (); ▁panel 4. setLayout ( gridbag ); ▁ Utils . constrain ( panel 4, ▁Annulla , ▁0, ▁0, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . CENTER , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁15 ); ▁ Utils . constrain ( panel 4, ▁Azione , ▁1, ▁0, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . CENTER , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁if ▁( ( caller ▁== ▁2) ▁|| ▁( caller ▁== ▁3) ▁) ▁ Utils . constrain ( panel 4, Cerca , ▁2, ▁0, ▁1, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . CENTER , ▁ 0.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁lista ▁= ▁new ▁List (10, ▁false ); ▁lista . setFont ( Configurazione Sistema . font _ allineato ); ▁panel 5 ▁= ▁new ▁Panel (); ▁panel 5. setLayout ( gridbag ); ▁ Utils . constrain ( panel 5, ▁etich 7, ▁0, ▁0, ▁2, ▁1, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁0, ▁0, ▁0, ▁0) ; ▁ Utils . constrain ( panel 5, lista , ▁0, ▁1, ▁ 4, ▁3, ▁Grid BagConstraints . BOTH , ▁Grid BagConstraints . CENTER , ▁3. 0, ▁3. 0, ▁0, ▁0, ▁0, ▁0) ; ▁// Attac co ▁i ▁pannelli ▁al ▁frame ▁this . setLayout ( gridbag ); ▁ Utils . constrain ( this , ▁panel 3, ▁0, ▁0, ▁ 6, ▁ 5, ▁Grid BagConstraints . NONE , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( this , ▁panel 4, ▁0, ▁ 5, ▁ 6, ▁1, ▁Grid BagConstraints . HORIZONTAL , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁ Utils . constrain ( this , ▁panel 5, ▁0, ▁ 6, ▁ 6, ▁1, ▁Grid BagConstraints . HORIZONTAL , ▁Grid BagConstraints . WEST , ▁1.0, ▁ 0.0, ▁ 5, ▁ 5, ▁ 5, ▁ 5); ▁panel 5. setVisible ( false ); ▁pack (); ▁} ▁p ublic ▁void ▁inizializza () ▁{ ▁Annulla . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁dispose (); ▁padre . setEnabled ( true ); ▁} ▁} ); ▁} ▁ Commissionamento ▁readDati Comm () ▁{ ▁ Commissionamento ▁comm ▁= ▁new ▁ Commissionamento (); ▁comm . setId Commissionamento ( ( Principale . config ) . getId Commissionamento ()); ▁comm . setNome Agenzia ( nome _ agenzia . getText ()); ▁comm . setNumStanz a ( num _ stanza . getText ()); ▁comm . setInizio Comm ( DateUtils . convert Date ( inizio _ comm . getText ())); ▁comm . setFine Comm ( DateUtils . convert Date ( fine _ comm . getText ())); ▁comm . set Scadenza Comm ( DateUtils . convert Date ( scadenza _ comm . getText ())); ▁comm . setNum Tel ( num _ tel _ agenzia . getText ()); ▁return ▁comm ; ▁} ▁void ▁writeDati Comm ( Commissionamento ▁comm ) ▁{ ▁nome _ agenzia . setText ( comm . getNome Agenzia ()); ▁num _ stanza . setText ( comm . getNumStanz a ()); ▁inizio _ comm . setText ( DateUtils . give String Of Date ( comm . getInizio Comm ())); ▁fine _ comm . setText ( DateUtils . give String Of Date ( comm . getFine Comm ())); ▁scadenza _ comm . setText ( DateUtils . give String Of Date ( comm . get Scadenza Comm ())); ▁num _ tel _ agenzia . setText ( comm . getNum Tel ()); ▁} ▁p rot ected ▁boolean ▁errori () ▁{ ▁Frame ▁msg ; ▁if ▁(!(( num _ stanza . getText ()). length () ▁<= ▁4)) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Il ▁numero ▁della ▁stanza ▁deve ▁aver e ▁al ▁piu ' ▁4 ▁caratteri ! ▁"); ▁return ▁true ; ▁} ▁if ▁( ( num _ stanza . getText ()). equals ("")) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Man ca ▁il ▁numero ▁di ▁stanza ! ▁"); ▁return ▁true ; ▁} ▁if ▁( ( nome _ agenzia . getText ()). equals ("")) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Man ca ▁il ▁nome ▁dell ' agenzia ! ▁"); ▁return ▁true ; ▁} ▁if ▁(!(( nome _ agenzia . getText ()). length () ▁<= ▁20)) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Il ▁nome ▁dell ' agenzia ▁deve ▁aver e ▁al ▁piu ' ▁20 ▁caratteri ! ▁"); ▁return ▁true ; ▁} ▁if ▁( ( scadenza _ comm . getText ()). equals ("")) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Man ca ▁la ▁data ▁di ▁scadenza ! ▁"); ▁return ▁true ; ▁} ▁if ▁(!( DateUtils . data Corrett a ( scadenza _ comm . getText ()) ▁) ) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁La ▁data ▁di ▁scadenza ▁e ' ▁non ▁corretta ! ▁"); ▁return ▁true ; ▁} ▁if ▁( ( num _ tel _ agenzia . getText ()). equals ("")) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Man ca ▁il ▁numero ▁di ▁telefono ! ▁"); ▁return ▁true ; ▁} ▁if ▁(!(( num _ tel _ agenzia . getText ()). length () ▁<= ▁16) ) ▁{ ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁Il ▁numero ▁di ▁telefono ▁deve ▁aver e ▁al ▁piu ' ▁16 ▁caratteri ! ▁"); ▁return ▁true ; ▁} ▁return ▁false ; ▁} ▁void ▁c lean Fields () ▁{ ▁nome _ agenzia . setText (" "); ▁num _ stanza . setText (" "); ▁inizio _ comm . setText (" "); ▁fine _ comm . setText (" "); ▁scadenza _ comm . setText (" "); ▁num _ tel _ agenzia . setText (" "); ▁} ▁// ▁proced ura ▁ utilizzata ▁da ▁Modifica ▁e ▁Cancella ▁void ▁crea Lista () ▁{ ▁Frame ▁msg ; ▁ Commissionamento ▁c ; ▁L ▁= ▁( Principale . db ) . found Commissionamenti ( new ▁String ( nome _ agenzia . getText ())); ▁if ▁( L ▁ != ▁null ) ▁{ ▁if ▁( lista . getItemCount () ▁ > ▁0) ▁lista . removeAll (); ▁if ▁(! L . isEmpty ()) ▁{ ▁panel 5. setVisible ( true ); ▁pack (); ▁for ▁( int ▁i ▁= ▁1; ▁i <= L . length (); ▁i ++) ▁lista . addItem ( ( L . get Commissionamento ( i )). toString ()); ▁} ▁else ▁msg ▁= ▁new ▁Avviso Dialog ( this , ▁" Agenzia ▁"+ nome _ agenzia . getText ()+" ▁non ▁trovata !" ); ▁} ▁else ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" P roblemi ▁con ▁il ▁database !" ); ▁} ▁void ▁aggiorna Disp ( Commissionamento ▁comm , ▁char ▁tipo ) ▁{ ▁Disponibilita ▁disp _ da _ cambiare ▁= ▁new ▁Disponibilita (); ▁Lista Disponibilita ▁elenco _ disp ▁= ▁( Principale . db ) . elenco Disponibilita (); ▁if ▁( elenco _ disp ▁== ▁null ) ▁{ ▁Frame ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁P roblemi ▁con ▁il ▁database ▁nella ▁lettura ▁delle ▁disponibilita '! ▁"); ▁return ; ▁} ▁disp _ da _ cambiare ▁= ▁ Utils . get DispOf Room ( elenco _ disp , comm . getNumStanz a (), true ); ▁if ▁( tipo ▁== ▁ Flag . COMMISSIONATA ) ▁disp _ da _ cambiare . set Disponibilita ( comm . getInizio Comm (), ▁comm . getFine Comm (), ▁tipo , ▁ Flag . DISPONIBILE ); ▁else ▁disp _ da _ cambiare . set Disponibilita ( comm . getInizio Comm (), ▁comm . getFine Comm (), ▁tipo , ▁ Flag . COMMISSIONATA ); ▁( Principale . db ) . change Disponibilita ( ▁disp _ da _ cambiare . getNumStanz a (), ▁disp _ da _ cambiare . getDispAnno Corr (), ▁disp _ da _ cambiare . getDispAnno Pro x () ▁ ); ▁} ▁}