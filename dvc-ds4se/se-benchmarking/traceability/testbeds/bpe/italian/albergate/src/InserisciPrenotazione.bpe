▁p ackage ▁interfacce ; ▁import ▁java . awt .* ; ▁import ▁java . awt . event .* ; ▁import ▁common . utility .* ; ▁import ▁common . def .* ; ▁import ▁java . util . Date ; ▁import ▁modul i .* ; ▁p ublic ▁class ▁Inserisci Prenotazione ▁ext ends ▁Maschera Prenotazione ▁{ ▁Maschera RicercaStanza ▁m ask _ ricerca ▁= ▁new ▁Maschera RicercaStanza ("",2 ); ▁String ▁agenzia ; ▁p ublic ▁Inserisci Prenotazione ( Stanza ▁room , ▁String ▁data _ i ▁ , ▁String ▁data _ f , ▁String ▁nome _ ag ) ▁{ ▁super ( room , ▁data _ i , ▁data _ f , ▁" Inserimento ▁dei ▁dati ▁della ▁prenotazione ", ▁" Inserisci ", 1, ▁ Flag . PENSIONE _ COMPLETA ); ▁agenzia ▁= ▁new ▁String ( nome _ ag ); ▁init ( room , ▁data _ i , ▁data _ f ); ▁} ▁p ublic ▁void ▁init ( Stanza ▁room , ▁String ▁data _ i , ▁String ▁data _ f ) ▁{ ▁testo [0]. setText ( room . getNumStanz a ()); ▁testo [0]. setEditable ( false ); ▁testo [4]. setText ( DateUtils . parse Date ( data _ i )); ▁testo [5]. setText ( DateUtils . parse Date ( data _ f )); ▁testo [4]. setEditable ( false ); ▁testo [5]. setEditable ( false ); ▁testo [7]. setText ( room . getDescrizione ()); ▁testo [9]. setText ( DateUtils . parse Date ( DateUtils . give String Of Date ( new ▁Date ())) ); ▁testo [8]. setText ( agenzia ); ▁testo [8]. setEditable ( false ); ▁if ▁(! agenzia . equals ("")) ▁{ ▁testo [6]. setEditable ( false ); ▁myCheckbox 1. set State ( true ); ▁} ▁Annulla . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁dispose (); ▁m ask _ ricerca . setEnabled ( true ); ▁} ▁} ); ▁Azione . a ddActionListener ( new ▁ActionListener () ▁{ ▁p ublic ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁startA zione (); ▁} ▁} ); ▁} ▁void ▁startA zione () ▁{ ▁Frame ▁msg ; ▁AskDialog ▁ask ; ▁int ▁an s w er ▁= ▁0; ▁if ▁( ▁! errori () ▁) ▁{ ▁Prenotazione ▁pren ▁= ▁readDati Pren (); ▁pren . setData Pren ( new ▁Date ()); ▁int ▁j ; ▁if ▁( ▁( j ▁= ▁( Principale . db ) . newId Prenotazione ()) ▁== ▁DataBase . OK ▁) ▁{ ▁( Principale . config ) . updateId Prenotazione (); ▁if ▁( ( j ▁= ▁( Principale . db ) . write Prenotazione ( pren )) ▁== ▁DataBase . OK ) ▁{ ▁if ▁(! myCheckbox 1. getStat e ()) ▁ask ▁= ▁new ▁AskDialog ( this , ▁" ▁Assegna re ▁la ▁stanza ▁o ▁Bloccar la ▁fin o ▁al ▁ricev imento ▁della ▁caparra ? ▁" , ▁" ▁Assegna re ▁" , ▁" ▁Bloccar e ▁" , ▁pren ); ▁else ▁start Aggiorna Disp ( pren , ▁ Flag . ASSEGNATA ); ▁} ▁else ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" P roblemi ▁con ▁il ▁database : ▁"+ DataBase . str Errore ( j ) ▁ ); ▁} ▁else ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" P roblemi ▁con ▁il ▁database : ▁"+ DataBase . str Errore ( j ) ▁ ); ▁} ▁} ▁void ▁start Aggiorna Disp ( Prenotazione ▁p , ▁char ▁tipo ) ▁{ ▁aggiorna Disp ( p , ▁tipo ); ▁dispose (); ▁m ask _ ricerca . re startAvvi o (); ▁m ask _ ricerca . setEnabled ( true ); ▁} ▁}