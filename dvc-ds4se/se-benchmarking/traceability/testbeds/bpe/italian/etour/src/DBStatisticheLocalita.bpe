▁ ï»¿ ▁p ackage ▁unisa . gps . etour . repository ; ▁import ▁ Java . sql . Connection ; ▁import ▁java . sql . ResultSet ; ▁import ▁java . sql . SQLException ; ▁import ▁java . sql . Statement ; ▁import ▁java . util . ArrayList ; ▁/ ▁** ▁* ▁Class ▁that ▁implements ▁the ▁local ▁statistical ▁* ▁* ▁@ ▁Auth or ▁J os eph ▁Mart one ▁* ▁@ ▁Version ▁0.1 ▁ Â© ▁ 2007 ▁eTour ▁Pro ject ▁- ▁C opy right ▁by ▁DMI ▁SE ▁@ ▁ SA ▁Lab ▁-- ▁* ▁University ▁of ▁Salerno ▁* ▁/ ▁p ublic ▁class ▁DB Statistiche Localita ▁implements ▁ IDB Statistiche Localita ▁( ▁/ ▁/ ▁ Empty ▁constructor ▁p ublic ▁DB Statistiche Localita ▁() ▁( ▁) ▁< String > ▁ottieniLista Localita ▁p ublic ▁ArrayList ▁() ▁throws ▁SQLException ▁( ▁/ ▁/ ▁Variable ▁for ▁the ▁connection ▁Connection ▁conn ▁= ▁null ; ▁/ ▁/ ▁Variable ▁for ▁the ▁query ▁Statement ▁stat ▁= ▁null ; ▁/ ▁/ ▁Variable ▁for ▁the ▁query ▁results ▁ResultSet ▁result ▁= ▁null ; ▁TR Y ▁( ▁/ ▁/ ▁Get ▁the ▁connection ▁D BConnessionePool . ottieni Connessione ▁conn ▁= ▁(); ▁/ ▁/ ▁Create ▁the ▁Statement ▁stat ▁= ▁conn . createStatement ▁(); ▁/ ▁/ ▁Query ▁for ▁the ▁extract ion ▁of ▁location ▁b etween ▁the ▁PR ▁and ▁ BC ▁String ▁query ▁= ▁" ( SELECT ▁DIS TIN CT ▁Location s " ▁+ ▁" FR OM ▁beneculturale ) ▁ UN ION " ▁+ ▁" ( SELECT ▁DIS TIN CT ▁FR OM ▁ Localita ▁puntodiristoro ) "; ▁/ ▁/ ▁The ▁query ▁is ▁execut ed ▁result ▁= ▁stat . executeQuery ▁( query ); ▁/ ▁/ ▁We ▁extract ▁the ▁results ▁from ▁the ▁result ▁set ▁and ▁move s ▁in ▁/ ▁/ ▁List ▁/ ▁/ ▁To ▁be ▁returned ▁/ ▁/ ▁List ▁that ▁include s ▁the ▁results ▁obtained ▁ArrayList ▁list ▁= ▁new ▁ArrayList ▁< String > ▁< String > ▁(); ▁while ▁( result . next ▁()) ▁( ▁/ ▁/ ▁Add ▁to ▁the ▁list ▁the ▁location s ▁obtained ▁lista . add ▁( result . getString ▁( ▁" Location ") ); ▁) ▁return ▁list ; ▁) ▁/ ▁/ ▁Al way s ▁run s ▁and ▁take s ▁ care ▁to ▁close ▁the ▁Result , ▁the ▁Statement ▁/ ▁/ ▁And ▁Connection ▁finally ▁( ▁if ▁( result ! ▁= ▁null ) ▁( ▁result . close ▁(); ▁) ▁if ▁( stat ▁= ▁null ) ▁( ▁stat . close ▁(); ▁) ▁if ▁( conn ! ▁= ▁null ) ▁( ▁D BConnessionePool . rilascia Connessione ▁( conn ); ▁) ▁) ▁) ▁p ublic ▁double ▁ottieni M edi e Voti Localita ▁( String ▁p localita ) ▁throws ▁SQLException ▁( ▁/ ▁/ ▁Variable ▁for ▁the ▁connection ▁Connection ▁conn ▁= ▁null ; ▁/ ▁/ ▁Variable ▁for ▁the ▁query ▁Statement ▁stat ▁= ▁null ; ▁/ ▁/ ▁Variable ▁for ▁the ▁query ▁results ▁ResultSet ▁result ▁= ▁null ; ▁TR Y ▁( ▁/ ▁/ ▁Get ▁the ▁connection ▁D BConnessionePool . ottieni Connessione ▁conn ▁= ▁(); ▁/ ▁/ ▁Create ▁the ▁Statement ▁stat ▁= ▁conn . createStatement ▁(); ▁/ ▁/ ▁Query ▁to ▁extract ▁the ▁aver age ▁of ▁the ▁votes ▁of ▁ca tering ▁outlets ▁/ ▁/ ▁Ac cording ▁to ▁a ▁Pass o ▁String ▁query ▁= ▁" SELECT ▁av g ▁( MediaVoti ) ▁as ▁MediaVoti ▁FR OM ▁puntodiristoro ▁W HER E ▁Location ▁= ▁'" ▁P localita ▁+ ▁+ ▁" ▁'" ; ▁/ ▁/ ▁The ▁query ▁is ▁execut ed ▁result ▁= ▁stat . executeQuery ▁( query ); ▁/ ▁/ ▁We ▁extract ▁the ▁results ▁from ▁the ▁result ▁set ▁double ▁point ▁= ▁0.0 ; ▁if ▁( result . next ▁()) ▁( ▁point ▁= ▁result . get Double ▁( ▁" MediaVoti "); ▁) ▁/ ▁/ ▁Query ▁to ▁extract ▁the ▁aver age ▁of ▁the ▁votes ▁of ▁cultural ▁/ ▁/ ▁Ac cording ▁to ▁a ▁Pass o ▁query ▁= ▁" SELECT ▁av g ▁( MediaVoti ) ▁ AS ▁MediaVoti ▁FR OM ▁beneculturale ▁W HER E ▁Location ▁= ▁'" ▁P localita ▁+ ▁+ ▁" ▁'" ; ▁/ ▁/ ▁The ▁query ▁is ▁execut ed ▁result ▁= ▁stat . executeQuery ▁( query ); ▁/ ▁/ ▁We ▁extract ▁the ▁results ▁from ▁the ▁result ▁set ▁double ▁good ▁= ▁0.0 ; ▁if ▁( result . next ▁()) ▁( ▁well ▁result . get Double ▁= ▁( ▁" MediaVoti "); ▁) ▁/ ▁/ ▁It ▁returns ▁the ▁aver age ▁of ▁the ▁refreshment ▁and ▁heritage ▁return ▁( good ▁point ▁+) ▁/ ▁2 ; ▁) ▁/ ▁/ ▁Al way s ▁run s ▁and ▁take s ▁ care ▁to ▁close ▁the ▁Result , ▁the ▁Statement ▁/ ▁/ ▁And ▁Connection ▁finally ▁( ▁if ▁( result ! ▁= ▁null ) ▁( ▁result . close ▁(); ▁) ▁if ▁( stat ▁= ▁null ) ▁( ▁stat . close ▁(); ▁) ▁if ▁( conn ! ▁= ▁null ) ▁( ▁D BConnessionePool . rilascia Connessione ▁( conn ); ▁) ▁) ▁) ▁)