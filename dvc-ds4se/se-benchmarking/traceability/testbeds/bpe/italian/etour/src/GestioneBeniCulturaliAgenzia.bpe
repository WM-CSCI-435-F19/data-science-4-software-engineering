▁p ackage ▁unisa . gps . etour . control . Gestione BeniCulturali ; ▁import ▁java . rmi . RemoteException ; ▁import ▁java . sql . SQLException ; ▁import ▁java . util . ArrayList ; ▁import ▁unisa . gps . etour . bean . Bean BeneCulturale ; ▁import ▁unisa . gps . etour . bean . BeanTag ; ▁import ▁unisa . gps . etour . bean . BeanVisitaBC ; ▁import ▁unisa . gps . etour . util . MessaggiErrore ; ▁/ ▁** ▁* ▁Class ▁management ▁of ▁cultural ▁heritage ▁unique ▁to ▁Agency ▁* ▁* ▁@ ▁Auth or ▁Mich e langelo ▁De ▁Sim one ▁* ▁@ ▁Version ▁0.1 ▁* ▁* ▁ © ▁ 2007 ▁eTour ▁Pro ject ▁- ▁C opy right ▁by ▁DMI ▁SE ▁@ ▁ SA ▁Lab ▁- ▁University ▁of ▁Salerno ▁* ▁/ ▁p ublic ▁class ▁Gestione BeniCulturali Agenzia ▁ext ends ▁Gestione BeniCulturali Comune ▁implements ▁IGestione BeniCulturali Agenzia ▁( ▁/ ▁* ▁* ▁Constructor ▁of ▁class , ▁richi ca ma ▁and ▁initialize s ▁the ▁class ▁of ▁common ▁management ▁* ▁/ ▁p ublic ▁Gestione BeniCulturali Agenzia ▁() ▁throws ▁RemoteException ▁( ▁super ▁(); ▁) ▁/ ▁* ▁* ▁Implement s ▁the ▁method ▁for ▁the ▁elimination ▁of ▁a ▁cultural ▁system . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁cancella BeneCulturale ▁( int ) ▁* ▁/ ▁p ublic ▁boolean ▁cancella BeneCulturale ▁( int ▁ pBeneCulturaleID ) ▁throws ▁RemoteException ▁( ▁if ▁(! ▁Controllo BeniCulturali . controllaId BeneCulturale ▁( pBeneCulturaleID )) ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DATI ); ▁TR Y ▁( ▁return ▁( dbbc . cancella BeneCulturale ▁( pBeneCulturaleID )); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁) ▁/ ▁* ▁* ▁Implement ▁the ▁method ▁for ▁the ▁insertion ▁of ▁a ▁new ▁cultural ▁object . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁inserisci BeneCulturale ▁( unisa . gps . etour . bean . Bean BeneCulturale ) ▁* ▁/ ▁p ublic ▁boolean ▁inserisci BeneCulturale ▁( Bean BeneCulturale ▁pBeneCulturale ) ▁throws ▁RemoteException ▁( ▁if ▁(! ▁Controllo BeniCulturali . controllaDati BeneCulturale ▁( pBeneCulturale )) ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ FORMAT O _ BEAN ); ▁TR Y ▁( ▁return ▁( dbbc . inserisci BeneCulturale ▁( pBeneCulturale )); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁) ▁/ ▁* ▁* ▁Implement s ▁the ▁method ▁for ▁obtain ing ▁all ▁the ▁cultural ▁assets ▁currently ▁in ▁the ▁system . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁ottieni BeniCulturali ▁() ▁* ▁/ ▁< Bean BeneCulturale > ▁ottieni BeniCulturali ▁p ublic ▁ArrayList ▁() ▁throws ▁RemoteException ▁( ▁TR Y ▁( ▁return ▁( dbbc . ottieniLista BC ▁()); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁) ▁/ ▁* ▁* ▁Implement ▁the ▁method ▁for ▁changing ▁a ▁cultural ▁asset ▁in ▁the ▁system . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁modifica BeneCulturale ▁( unisa . gps . etour . bean . Bean BeneCulturale ) ▁* ▁/ ▁p ublic ▁boolean ▁modifica BeneCulturale ▁( Bean BeneCulturale ▁pBeneCulturale ) ▁throws ▁RemoteException ▁( ▁if ▁(! ▁Controllo BeniCulturali . controllaDati BeneCulturale ▁( pBeneCulturale )) ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ FORMAT O _ BEAN ); ▁TR Y ▁( ▁return ▁( dbbc . modifica BeneCulturale ▁( pBeneCulturale )); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁) ▁/ ▁* ▁* ▁Implement s ▁the ▁method ▁for ▁adding ▁a ▁tag ▁to ▁a ▁cultural ▁object . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁aggiungi Tag BeneCulturale ▁( int , ▁int ) ▁* ▁/ ▁p ublic ▁boolean ▁aggiungi Tag BeneCulturale ▁( pBeneCulturaleID ▁int , ▁int ▁pTagID ) ▁throws ▁RemoteException ▁( ▁if ▁(! ▁Controllo BeniCulturali . controllaId BeneCulturale ▁( pBeneCulturaleID ) ▁| ▁| ! ▁( pTagID > ▁0)) ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DATI ); ▁/ ▁* ▁* ▁ This ▁seg ment ▁of ▁code ▁that ▁actual ly ▁control s ▁the ▁cultural ▁speficiato ▁* ▁H ave ▁the ▁tag ▁ defined . ▁* ▁/ ▁/ ▁* ▁* ▁Get ▁all ▁tags ▁to ▁the ▁cultural ▁past ▁for ▁parameter ▁* ▁/ ▁ArrayList ▁< BeanTag > ▁tempTag ▁= ▁null ; ▁contieneTag ▁boolean ▁= ▁false ; ▁TR Y ▁( ▁tempTag ▁= ▁dbtag . ottieniTag BeneCulturale ▁( pBeneCulturaleID ); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁/ ▁* ▁* ▁ Here ▁we ▁iterate ▁to ▁find ▁the ▁tag ▁that ▁speficiato , ▁if ▁it ▁is ▁you ▁set ▁a ▁se nt ry ▁* ▁In ▁order ▁not ▁to ▁add ▁a ▁tag ▁t wi ce ▁for ▁the ▁same ▁cultural ▁object . ▁* ▁/ ▁for ▁( t ▁BeanTag : ▁tempTag ) ▁if ▁( t . getId ▁() ▁== ▁pTagID ) ▁contieneTag ▁= ▁true ; ▁if ▁(! ▁contieneTag ) ▁TR Y ▁( ▁return ▁( dbtag . aggiungeTag BeneCulturale ▁( pBeneCulturaleID , ▁pTagID )); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁return ▁false ; ▁) ▁/ ▁* ▁* ▁Implement ▁the ▁method ▁for ▁removing ▁a ▁tag ▁from ▁a ▁cultural ▁object . ▁* ▁* ▁@ ▁Se e ▁unisa . gps . etour . control . Gestione BeniCulturali . IGestione BeniCulturali Agenzia ▁# ▁rimuov iTag BeneCulturale ▁( int , ▁int ) ▁* ▁/ ▁p ublic ▁boolean ▁rimuov iTag BeneCulturale ▁( pBeneCulturaleID ▁int , ▁int ▁pTagID ) ▁throws ▁RemoteException ▁( ▁if ▁(! ▁Controllo BeniCulturali . controllaId BeneCulturale ▁( pBeneCulturaleID ) ▁| ▁| ! ▁( pTagID > ▁0)) ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DATI ); ▁/ ▁* ▁* ▁ This ▁seg ment ▁of ▁code ▁that ▁actual ly ▁control s ▁the ▁cultural ▁speficiato ▁* ▁Has ▁the ▁specified ▁tag . ▁* ▁/ ▁/ ▁* ▁* ▁Get ▁all ▁tags ▁to ▁the ▁cultural ▁past ▁for ▁parameter ▁* ▁/ ▁ArrayList ▁< BeanTag > ▁tempTag ▁= ▁null ; ▁TR Y ▁( ▁tempTag ▁= ▁dbtag . ottieniTag BeneCulturale ▁( pBeneCulturaleID ); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁/ ▁* ▁* ▁ Here ▁we ▁iterate ▁to ▁find ▁the ▁tag ▁that ▁speficiato , ▁if ▁you ▁found ▁the ▁transaction ▁is ▁made ▁* ▁Remov al ▁of ▁the ▁tag ▁and ▁returns ▁control ▁* ▁/ ▁for ▁( t ▁BeanTag : ▁tempTag ) ▁( ▁if ▁( t . getId ▁() ▁== ▁pTagID ) ▁( ▁TR Y ▁( ▁return ▁( dbtag . cancellaTag BeneCulturale ▁( pBeneCulturaleID , ▁pTagID )); ▁) ▁ catch ▁( SQLException ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ DBMS ); ▁) ▁ catch ▁( Exception ▁e ) ▁( ▁throw ▁new ▁RemoteException ▁( MessaggiErrore . ERRORE _ SCONOSCIUTO ); ▁) ▁) ▁) ▁return ▁false ; ▁) ▁)